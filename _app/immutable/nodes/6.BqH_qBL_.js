import"../chunks/NZTpNUN0.js";import{f as G,aH as k,s as r,d as o,t as $,g as e,a as N,e as n,r as l}from"../chunks/DYYdghhO.js";import{s as h}from"../chunks/pNGmwNJS.js";import{i as Y}from"../chunks/CDfoiKSd.js";import{b as A,r as B}from"../chunks/D-uzjW0X.js";import{d as F}from"../chunks/DE0wMDYD.js";import{b as K,P as S}from"../chunks/D3A2983d.js";const Q=!1,W=!0,ce=Object.freeze(Object.defineProperty({__proto__:null,prerender:W,ssr:Q},Symbol.toStringTag,{value:"Module"}));async function X(m,a,i,v){if(!e(a)){i({error:"Please enter an email"},!0);return}n(v,!0);try{const s=await fetch(`${S}/request-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e(a)})}),c=await s.json();i(c,!s.ok)}catch(s){i({error:s.message},!0)}finally{n(v,!1)}}function Z(m,a,i,v,s,c,u){if(e(a)){i();return}if(!e(v)){s({error:"Please enter an email first"},!0);return}n(a,!0),c(),n(u,setInterval(c,3e3),!0)}var ee=G('<div><pre class="svelte-1vondjk"> </pre></div>'),te=G('<div class="container svelte-1vondjk"><h1 class="svelte-1vondjk">Test Email Verification</h1> <p class="subtitle svelte-1vondjk">Tests the <code class="svelte-1vondjk">/request-verification</code>, <code class="svelte-1vondjk">/verify-email</code>, and <code class="svelte-1vondjk">/check-verification</code> endpoints on the Python backend.</p> <section class="svelte-1vondjk"><h3 class="svelte-1vondjk">1. Request Verification</h3> <p class="svelte-1vondjk">Enter an email address and send a verification link.</p> <div class="input-row svelte-1vondjk"><input type="email" placeholder="Enter email address" class="svelte-1vondjk"/> <button class="svelte-1vondjk"> </button></div></section> <section class="svelte-1vondjk"><h3 class="svelte-1vondjk">2. Check Verification Status</h3> <p class="svelte-1vondjk">Check whether the email has been verified yet.</p> <div class="input-row svelte-1vondjk"><button class="svelte-1vondjk">Check Status</button> <button> </button></div></section> <!> <section class="info svelte-1vondjk"><h3 class="svelte-1vondjk">API Endpoints</h3> <table class="svelte-1vondjk"><thead><tr><th class="svelte-1vondjk">Method</th><th class="svelte-1vondjk">Endpoint</th><th class="svelte-1vondjk">Description</th></tr></thead><tbody><tr><td class="svelte-1vondjk"><code class="svelte-1vondjk">POST</code></td><td class="svelte-1vondjk"><code class="svelte-1vondjk">/request-verification</code></td><td class="svelte-1vondjk">Send verification email with signed token</td></tr><tr><td class="svelte-1vondjk"><code class="svelte-1vondjk">GET</code></td><td class="svelte-1vondjk"><code class="svelte-1vondjk">/verify-email?token=...</code></td><td class="svelte-1vondjk">Verify email via link (user clicks in email)</td></tr><tr><td class="svelte-1vondjk"><code class="svelte-1vondjk">GET</code></td><td class="svelte-1vondjk"><code class="svelte-1vondjk">/check-verification?email=...</code></td><td class="svelte-1vondjk">Poll verification status</td></tr></tbody></table> <p class="server-url svelte-1vondjk">Server: <code class="svelte-1vondjk"> </code></p></section></div>');function ve(m){let a=k(""),i=k(""),v=k(""),s=k(!1),c=k(!1),u=k(null);function f(t,d){n(i,JSON.stringify(t,null,2),!0),n(v,d?"error":"success",!0)}async function T(){if(!e(a)){f({error:"Please enter an email"},!0);return}n(s,!0);try{const t=await fetch(`${S}/check-verification?email=${encodeURIComponent(e(a))}`),d=await t.json();f(d,!t.ok)}catch(t){f({error:t.message},!0)}finally{n(s,!1)}}function H(){n(c,!1),e(u)&&(clearInterval(e(u)),n(u,null))}var _=te(),b=r(o(_),4),E=r(o(b),4),y=o(E);B(y);var p=r(y,2);p.__click=[X,a,f,s];var J=o(p,!0);l(p),l(E),l(b);var g=r(b,2),w=r(o(g),4),P=o(w);P.__click=T;var j=r(P,2);j.__click=[Z,c,H,a,f,T,u];let O;var M=o(j,!0);l(j),l(w),l(g);var V=r(g,2);{var U=t=>{var d=ee();let I;var R=o(d),D=o(R,!0);l(R),l(d),$(L=>{I=A(d,1,"result svelte-1vondjk",null,I,L),h(D,e(i))},[()=>({success:e(v)==="success",error:e(v)==="error"})]),N(t,d)};Y(V,t=>{e(i)&&t(U)})}var x=r(V,2),q=r(o(x),4),C=r(o(q)),z=o(C,!0);l(C),l(q),l(x),l(_),$(t=>{p.disabled=e(s),h(J,e(s)?"Sending...":"Send Verification"),P.disabled=e(s),O=A(j,1,"svelte-1vondjk",null,O,t),h(M,e(c)?"Stop Polling":"Auto-Poll (3s)"),h(z,S)},[()=>({polling:e(c)})]),K(y,()=>e(a),t=>n(a,t)),N(m,_)}F(["click"]);export{ve as component,ce as universal};

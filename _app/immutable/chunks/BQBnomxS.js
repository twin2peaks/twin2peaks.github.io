import"./CWj6FrbW.js";import"./BnBsQ0Ec.js";import{o as fe,z as le,A as Ae,f as F,g as Y,s as W,t as Te,e as O,w,C as D,B as M,v as me,G as ue,x as de,aw as xt,D as Je,F as Qe,L as vt}from"./xhVCQ2rC.js";import{w as xe,g as ve,s as Le,o as Lt,d as Nt}from"./DjOT-GKG.js";import{t as z,a as _e}from"./uGN1DfQo.js";import{p as re,a as Ne,s as ye,i as yt}from"./CgmtfOra.js";import{f as It,g as Gt,R as pe,l as pt,j as Fe,n as Rt,k as Ue,m as He,r as Dt,U as zt,i as Pt,V as $t,W as Ct,c as Ie,F as Ge,N as Re,d as Bt,X as kt,Y as Ot,o as Xt,p as Ft,q as Ut,s as Ht,u as Vt,t as Zt,B as Yt}from"./DLPeJaAa.js";import{f as De}from"./WTgdNF2S.js";import{b as Wt}from"./8LoQyTB9.js";import{G as We,T as Kt,k as et,l as jt,w as qt,B as te,z as tt,M as X,F as Jt,n as Qt,o as er,p as tr,c as A,g as Et,i as ce,a as rr,A as rt,P as nr,D as or,I as ar,f as St,J as sr,K as ir,X as cr,m as lr,x as ur,Y as fr,y as mr,h as dr}from"./XEAAqoRX.js";const Pe=(e,t,r)=>{if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];const n=t.findIndex(o=>o>=e)-1;return r[n]+(r[n+1]-r[n])*((e-t[n])/(t[n+1]-t[n]))},_r={s_65:{hersteller_name:"Calenberg Ingenieure",product_name:"Compactlager S 65",check:(e,t)=>(e>=70||t>=100&&e>=50)&&t>=70,thicknesses:e=>[10,15,20,25,30].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=6.25?4.03*Math.pow(e,1.16):33.9,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},s_70:{hersteller_name:"Calenberg Ingenieure",product_name:"Compactlager S 70",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=5?6.99*e:34.95,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},esz_100:{hersteller_name:"ESZ Wilfried Becker",product_name:"Typ 200",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20,25,30].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<2.33?5.3805*e-.6536:e<=2.5?10.635*e-12.89:e<=5?8.4004*e-7.3293:34.7,rot_b_rule:(e,t)=>Math.min(450*e/t,48),rot_res_rule:48,bohr_rule:!0,"Nachweis erfolgreich t":[]},esz_100_comp:{hersteller_name:"ESZ Wilfried Becker",product_name:"Typ 200 Composite",check:(e,t)=>e>=90&&e<=600&&t>=90&&t<=600,thicknesses:[15,30,35,40,45,50,55,60,65],sigma_rd_rule:e=>e<=3.75?17.17*e-11.32:e<=4?35.94*e-81.67:e<=4.5?1.17*e+57.39:62.6,rot_b_rule:(e,t)=>Math.min(300*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},flaechenloch_typ_z:{hersteller_name:"Calenberg Ingenieure",product_name:"Fl채chenlochlager Typ Z",check:(e,t)=>e>=120&&e<=600&&t>=120&&t<=600,thicknesses:[15,24,33,42,51],sigma_rd_rule:e=>35,rot_b_rule:(e,t)=>e===15?Math.min(200*e/t,40):Math.min(350*e/t,43),rot_res_rule:e=>e===15?40:43,bohr_rule:!0,"Nachweis erfolgreich t":[]},conti_60:{hersteller_name:"Continental (ContiTech)",product_name:"Contitan 60",check:(e,t)=>e>=70&&t>=70,thicknesses:[10,20,30],sigma_rd_rule:e=>e<=5?.315*Math.pow(e,2)+4.035*e:28.05,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},leschu_n15:{hersteller_name:"Leschuplast GLT",product_name:"Typ N15",check:(e,t)=>e>=70&&t>=70,thicknesses:[10,15,20],sigma_rd_rule:e=>e<1.88?3.29*e+1.46:e<2.5?2.58*e+2.79:e<3.5?3.34*e+.88:e<3.75?12.21*e-30.17:e<5?3.15*e+3.81:e<=10?1.66*e+11.29:27.89,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_3000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 3000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Pe(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[2.4,2.4,4.4,5.74,6.88,7.58,8.01,8.29,8.47,8.59,8.68,8.75,8.8]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_6000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 6000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Pe(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[5,5,9.16,11.82,14.23,15.72,16.64,17.23,17.62,17.89,18.09,18.23,18.33]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_12000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 12000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Pe(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[5.76,5.76,12.72,20.9,30.28,40.88,52.68,52.68,52.68,52.68,52.68,52.68,52.68]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},isoldyn_3000:{hersteller_name:"HBT-ISOL",product_name:"ISOLDYN 3000",check:(e,t)=>(e>=70||e>=50)&&t>=100,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>e<=6?3.96*Math.pow(e,.36):7.55,rot_b_rule:(e,t)=>Math.min(300*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},matteco_elr08:{hersteller_name:"matteco",product_name:"ELR 8",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=4.17?.422*Math.exp(.698*e):7.75,rot_b_rule:(e,t)=>Math.min(200*e/t,16),rot_res_rule:16,bohr_rule:!0,"Nachweis erfolgreich t":[]},matteco_elr18:{hersteller_name:"matteco",product_name:"ELR 18",check:(e,t)=>e>=70&&t>=70,thicknesses:[10],sigma_rd_rule:e=>e<=4.5?1.28*Math.pow(e,1.25):8.4,rot_b_rule:(e,t)=>Math.min(200*e/t,20),rot_res_rule:20,bohr_rule:!0,"Nachweis erfolgreich t":[]}};function hr(e){const{is_ortbeton:t,a:r,b:n,is_dorn:o,is_wirksamgeschlossen:c,d_b:i,n_b:l,ff_zd:s,v_x:a,alpha_y:m,c_nom:f,is_streifen:u}=e,g=r*n;let p;if(o===0)p=g;else{p=Math.round(g-l*Math.PI*(i/2)**2);const P=Math.round((1-p/g)*100)/100;P>.1&&console.warn(`Bohrungsfl채che 체berschreitet 10% der Lagerfl채che! ratio_bohr=${P}`)}const h=Math.round(1e3*s/p*10)/10,_=10;let d=Math.round(.625/r*1e3*10)/10;t===0&&(d*=.5);const E=d+_,S=m+E,v=r+(f+10)+25;let I;u===0&&(I=n+2*(f+10));const T=[];for(const[P,y]of Object.entries(_r))if(y.check(r,n)){const K=typeof y.thicknesses=="function"?y.thicknesses(r):y.thicknesses;for(const N of K){let $;!o||c?$=Math.round(g/(2*N*(r+n))*1e3)/1e3:$=Math.round((g-.25*Math.PI*l*N**2)/(2*N*(r+n)+N*Math.PI*l*i)*1e3)/1e3;const U=y.sigma_rd_rule($),B=y.rot_b_rule(N,r),k=y.rot_res_rule,H=.6*(N-2),j=h/U,G=a/H,V=S/B,R=Math.round(1.5*h*n*N/1e3*1e3)/1e3,he=Math.round(1.5*h*r*N/1e3*1e3)/1e3,ge=o?y.bohr_rule:!0,Tt=j<=1&&G<=1&&V<=1&&ge;T.push({lagerType:P,manufacturer:y.hersteller_name,productName:y.product_name,thickness:N,s:$,sigma_rd:U,alpha_y_max:B,alpha_y_ges:S,alpha_res_max:k,v_x_max:H,sigma_nachw:j,v_x_nachw:G,rot_b_nachw:V,querzug_x:R,querzug_y:he,passed:Tt,bohr_nachw:ge,l_xmin:v,l_ymin:I,bohr_rule:y.bohr_rule})}}return T}const gr=xe([]),pr=xe(null),ae=0,ee=-.8,se=-.8,nt=(ee+se)/2,Ee=.2,Se=ee,be=2,we=.25,bt=.08,Er=[[ee,1,-0],[se,1,-0],[se,1,ae],[ee,1,ae],[nt,.3,ae],[ee,.3,ae],[se,.6,ae],[se,.6,-0],[nt,.3,-0],[ee,.3,-0],[Se,0,we],[Se,be,we],[Se,be,-.25],[Se,0,-.25],[Ee,be,-.25],[Ee,0,-.25],[Ee,be,we],[Ee,0,we]],Sr=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],br=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function Ke(e,t,r=0,n=25){const o=Er.map(s=>[s[0],s[1],s[2]]),c=n/1e3+.01,i=e/1e3;let l=t/2/1e3;return r||(l+=c),[1,2,6,7].forEach(s=>{o[s][0]-=i+bt+c}),[4,8].forEach(s=>{o[s][0]-=-.1}),[0,1,7,8,9].forEach(s=>{o[s][2]-=l}),[2,3,4,5,6].forEach(s=>{o[s][2]+=l}),r?([12,13,14,15].forEach(s=>{o[s][2]=-t/2/1e3}),[10,11,16,17].forEach(s=>{o[s][2]=t/2/1e3})):([12,13,14,15].forEach(s=>{o[s][2]-=l}),[10,11,16,17].forEach(s=>{o[s][2]+=l})),o}function ot(e,t=1){e.computeVertexNormals();const r=e.attributes.position,n=e.attributes.normal,o=[],c=r.count;for(let i=0;i<c;i++){const l=r.getX(i),s=r.getY(i),a=r.getZ(i),m=Math.abs(n.getX(i)),f=Math.abs(n.getY(i)),u=Math.abs(n.getZ(i));m>=f&&m>=u?o.push(a*t,s*t):f>=m&&f>=u?o.push(l*t,a*t):o.push(l*t,s*t)}e.setAttribute("uv",new Jt(o,2))}function wr(e){const t=document.createElement("canvas");t.width=64,t.height=64;const r=t.getContext("2d");r.fillStyle="red",r.beginPath(),r.arc(32,32,28,0,Math.PI*2),r.fill(),r.fillStyle="white",r.font="bold 36px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(e,32,32);const n=new Qt(t),o=new er({map:n}),c=new tr(o);return c.scale.set(.08,.08,1),c}function at(e,t,r=!1){const n=new We,o=t.a,c=t.b,i=t.is_streifen,l=t.c_nom,a=new Kt().load(It("/texture/concrete1.jpg"));a.wrapS=et,a.wrapT=et,a.repeat.set(1,1),a.colorSpace=jt;const m=new qt({map:a,color:Gt,roughness:.9,metalness:0,flatShading:!1}),f=Ke(o,c,i,l),u=new Float32Array(f.flat());let g=new te;g.setAttribute("position",new tt(u,3)),g.setIndex(Sr),g=g.toNonIndexed(),ot(g,1);const p=new X(g,m);p.castShadow=!0,p.receiveShadow=!0,n.add(p);let h=new te;h.setAttribute("position",new tt(u,3)),h.setIndex(br),h=h.toNonIndexed(),ot(h,1);const _=new X(h,m);return _.castShadow=!0,_.receiveShadow=!0,n.add(_),r&&f.forEach((d,E)=>{const S=wr(E.toString());S.position.set(d[0],d[1],d[2]),n.add(S)}),e.add(n),n}function oe(e){const t=e||ve(C);console.log("getHorizontalSurfaceInfo - using params:",{a:t.a,b:t.b,is_streifen:t.is_streifen,source:e?"provided":"store"});const r=Ke(t.a,t.b,t.is_streifen,t.c_nom),n=[r[0],r[1],r[2],r[3]],c={centerX:-t.a/2/1e3-bt+ee,centerY:n[0][1],centerZ:(n[0][2]+n[1][2]+n[2][2]+n[3][2])/4};return console.log("getHorizontalSurfaceInfo - calculated center:",c),c}function st(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(n=>n.dispose()):r.material.dispose())}),e.remove(t))}let J=[],Z=[];function Mr(){return[...J,...Z]}let Me=null,je=0;const Ve=Rt;async function $e(e,t,r,n,o,c=0,i=0,l=!1){try{const s=await pt(),a=Fe(o,s,Ve);Ue(a);const m=He(16711680),f=new X(a,m),u=new A(r[0]-t[0],0,r[2]-t[2]).normalize(),g=new A(-u.z,0,u.x),p=(t[0]+r[0])/2+c+g.x*n,h=(t[2]+r[2])/2+i+g.z*n;f.position.set(p,t[1]+.001,h),f.rotation.x=-Math.PI/2;const _=Math.atan2(u.z,u.x)+Math.PI;f.rotation.z=_,l&&(Me=f,je=_),e.add(f),J.push(f)}catch(s){console.error("Failed to load font for 3D text:",s)}}function Ze(e){if(Me){const t=e?Math.PI:0;Me.rotation.z=je+t}}function Ce(e,t,r,n,o,c=.05){Pt(e,t,r,n,o,c,J)}function Ye(e){J=Dt(e,J),Me=null,je=0}function it(e){Z=zt(e,Z)}async function ct(e,t=new A(0,0,0)){const o=new Et({color:new rr(pe)}),c=pe;t.z=t.z-.035;const i=new A(t.x-.06,t.y,t.z),l=new te().setFromPoints([t,i]),s=new ce(l,o);e.add(s),Z.push(s);const a=new A(-1,0,0),m=new rt(a,i,.03,c,.03*.5,.03*.3);e.add(m),Z.push(m);const f=new A(t.x,t.y,t.z-.06),u=new te().setFromPoints([t,f]),g=new ce(u,o);e.add(g),Z.push(g);const p=new A(0,0,-1),h=new rt(p,f,.03,c,.03*.5,.03*.3);e.add(h),Z.push(h);try{const _=await pt(),d=Fe(z("shearDeformation.scene.axisLabel.x"),_,Ve);Ue(d);const E=He(pe),S=new X(d,E);S.position.set(t.x-.06*1-.05,t.y+.001,t.z-.02),S.rotation.x=-Math.PI/2,S.rotation.z=0,e.add(S),Z.push(S);const v=Fe("y",_,Ve);Ue(v);const I=He(pe),T=new X(v,I);T.position.set(t.x-.02,t.y+.001,t.z-.06*1.1),T.rotation.x=-Math.PI/2,T.rotation.z=0,e.add(T),Z.push(T)}catch(_){console.error("Failed to create 3D text for coordinate system:",_)}}async function lt(e){Ye(e);const t=ve(C),r=Ke(t.a,t.b,t.is_streifen,t.c_nom),n=oe(),o=new Et({color:16711680});let c=t.c_nom/1e3+.01;t.is_streifen===1&&(c=0);const i=.01,l=t.b/1e3,s=t.a/1e3;if(t.is_streifen===0){const N=(r[1][0]+r[2][0])/2,$=r[1][1],U=(r[1][2]+r[2][2])/2,B=new A(N-i-c,$,U-l/2),k=new A(N-i-c,$,U+l/2),H=new te().setFromPoints([B,k]),j=new ce(H,o);e.add(j),J.push(j);const G=new A().subVectors(k,B).normalize();Ce(e,B,k,G,o),await $e(e,[B.x,B.y,B.z],[k.x,k.y,k.z],.02,`b = ${t.b} mm`,0,0)}const a=n.centerX,m=r[0][1],f=(r[0][2]+r[1][2])/2,u=new A(a-s/2,m,f-i-c),g=new A(a+s/2,m,f-i-c),p=new te().setFromPoints([u,g]),h=new ce(p,o);e.add(h),J.push(h);const _=new A().subVectors(g,u).normalize();Ce(e,u,g,_,o),await $e(e,[u.x,u.y,u.z],[g.x,g.y,g.z],-.02,`a = ${t.a} mm`,0,0,!0);const d=.04,E=n.centerX-t.a/2e3,S=n.centerY,v=n.centerZ+t.b/2e3+d+c,I=t.c_nom/1e3+.01,T=new A(E,S,v),P=new A(E-I,S,v),y=new te().setFromPoints([T,P]),L=new ce(y,o);e.add(L),J.push(L);const K=new A().subVectors(P,T).normalize();Ce(e,T,P,K,o),await $e(e,[T.x,T.y,T.z],[P.x,P.y,P.z],-.05,"cnom + 100 mm",0,0)}let Be=null,ke=null,x=null;function Ar(e,t,r){if(!e||!t)return;const n=new A;n.subVectors(t.target,e.position),n.normalize();const c=e.position.distanceTo(t.target)*(1-r),i=n.clone().multiplyScalar(c);e.position.add(i),t.update()}function wt(e){const t=e||ve(C),r=(t.b+300)/1e3;return console.log("Camera radius calculation - params.b:",t.b,"scaleFactor:",r),r}function qe(){const e=ze(),t=wt();console.log("Initializing automatic camera - radius:",t);const r={radius:t,polarAngle:Math.PI/3,azimuthStart:0,azimuthEnd:-Math.PI,focusPoint:e};x=new $t(r)}function ze(e){const t=oe(e),r=new A(t.centerX,t.centerY,t.centerZ);return console.log("getTargetCenter called - surfaceInfo:",t),r}let q=null,Q=!1,ne=null,ie=0;const ut=1e3;function Tr(e){console.log("regenerateCameraWaypoints called with params:",e),q=null,Q=!1,ne=null;const t=ze(e);if(console.log("Focus point (center):",t.x,t.y,t.z),x||(console.log("Automatic camera not initialized, initializing now"),qe()),x){const r=wt(e);console.log("Updating camera config - radius:",r,"final radius (x2):",r*2,"focusPoint:",t),x.updateConfig({radius:r*2,focusPoint:t})}}function xr(){const e=ze(),t=ve(C),r=Mr();if(r.length===0){const a=Math.max(t.a,t.b)/1e3*3;return new A(e.x,e.y+a,e.z)}let o=Math.max(t.a,t.b)/1e3*2;const c=20;let i=0;const l=new nr(35,1,.01,1e3);for(;i<c;){l.position.set(e.x,e.y+o,e.z),l.lookAt(e),l.updateMatrixWorld(),l.updateProjectionMatrix();const s=new or,a=new ar;a.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),s.setFromProjectionMatrix(a);let m=!0;for(const f of r){f.updateMatrixWorld(!0);const u=new St().setFromObject(f);if(!s.intersectsBox(u)){m=!1;break}}if(m){o*=1.1;break}o*=1.2,i++}return new A(e.x,e.y+o,e.z)}function ft(e,t){if(!q)return!1;const r=e.position,n=.01;return Math.abs(r.x-q.x)<n&&Math.abs(r.z-q.z)<n}function Mt(){Q=!0,ie=0,ne=null,x==null||x.start(),Ze(!0)}function vr(e,t,r){if(t){if(q||(q=ze()),Q){if(ie===0&&(ie=e,ne=xr(),Be=t.position.clone(),ke=r.target.clone()),!Be||!ne||!ke){console.error("Top view positions not initialized properly"),Q=!1;return}const n=e-ie;let o=Math.min(n/ut,1);o=o<.5?4*o*o*o:1-Math.pow(-2*o+2,3)/2,t.position.lerpVectors(Be,ne,o),r.target.lerpVectors(ke,q,o),t.lookAt(r.target),r.update(),n>=ut&&(t.position.copy(ne),r.target.copy(q),t.lookAt(r.target),r.update(),Q=!1,ie=0,x==null||x.stop());return}if(!Q&&ft(t)?Ze(!0):Q||Ze(!1),x||qe(),!!(x!=null&&x.isActive())){if(ft(t)){x==null||x.stop();return}x&&x.animate(e,t,r)}}}function Lr(e,t,r){const n=o=>{o.preventDefault();let c=1;switch(o.deltaMode){case 2:c=1+o.deltaY*.025;break;case 1:c=1+o.deltaY*.01;break;default:c=1+o.deltaY*25e-5;break}Ar(t,r,c)};return e.domElement.addEventListener("wheel",n,{passive:!1}),()=>{e.domElement.removeEventListener("wheel",n)}}function Nr(e){return x||qe(),x?Ct(e,x):()=>{}}const Oe={is_streifen:0,a:200,b:250,t:10,c_nom:25,is_dorn:1,is_wirksamgeschlossen:0,d_b:20,d_d:20,n_b:1,ff_zd:800,v_x:5,alpha_y:10,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0};function yr(){const{subscribe:e,set:t,update:r}=xe(Oe),n={subscribe:e,set:o=>{t(o),Xe(o)},update:o=>{r(c=>{const i=o(c);return Xe(i),i})},reset:()=>{t(Oe),Xe(Oe)},updateField:(o,c)=>{n.update(i=>({...i,[o]:c}))}};return n}const C=yr();function Xe(e){console.log("Parameter changed callback - a:",e.a,"b:",e.b,"is_streifen:",e.is_streifen),pr.set(null);const t=hr(e);gr.set(t),Tr(e)}const b={LAGERBREITE_MIN:50,LAGERBREITE_MAX:1e3,LAGERLAENGE_MIN:70,LAGERLAENGE_MAX:1e3,BETONDECKUNG_MIN:0,BETONDECKUNG_MAX:100,BOHRUNGSDURCHMESSER_MIN:12,BOHRUNGSDURCHMESSER_MAX:50,BEMESSUNGSLAST_MIN:0,BEMESSUNGSLAST_MAX:5e4,LAGERVERDREHUNG_MIN:0,LAGERVERDREHUNG_MAX:50,LAGERVERSCHIEBUNG_MIN:0,LAGERVERSCHIEBUNG_MAX:50};var Ir=F(" <!>",1),Gr=F("<!> <!>",1);function an(e,t){fe(t,!1);const[r,n]=Ne(),o=()=>ye(C,"$shearDeformationParameterStore",r);let c=re(t,"step",8,5),i=D(),l=D(!1),s=D(""),a=null;function m(p){let h=p,_=!1,d="";p<b.LAGERBREITE_MIN?(h=b.LAGERBREITE_MIN,_=!0,d=`${z("shearDeformation.parameters.minValue")}: ${b.LAGERBREITE_MIN} mm`):p>b.LAGERBREITE_MAX&&(h=b.LAGERBREITE_MAX,_=!0,d=`${z("shearDeformation.parameters.maxValue")}: ${b.LAGERBREITE_MAX} mm`);const E=o().b+100;h>E&&(h=E,_=!0,d=z("shearDeformation.parameters.constraintAB")),_&&(M(l,!0),M(s,d),a&&clearTimeout(a),a=setTimeout(()=>{M(l,!1),M(s,"")},3e3)),C.updateField("a",h)}le(()=>o(),()=>{M(i,o().a)}),Ae(),_e();var f=Gr(),u=Y(f);Ie(u,{children:(p,h)=>{de();var _=Ir(),d=Y(_),E=W(d);Ge(E,{get formula(){return De.a}}),Te(S=>Le(d,`${S??""} `),[()=>z("shearDeformation.parameters.bearingDepth")],ue),O(p,_)},$$slots:{default:!0}});var g=W(u,2);Re(g,{size:"sm",get step(){return c()},helperText:"mm",get min(){return b.LAGERBREITE_MIN},get max(){return b.LAGERBREITE_MAX},light:!0,get invalid(){return w(l)},get invalidText(){return w(s)},get value(){return w(i)},set value(p){M(i,p)},$$events:{change:()=>m(w(i))},$$legacy:!0}),O(e,f),me(),n()}var Rr=F(" <!>",1),Dr=F("<!> <!>",1);function sn(e,t){fe(t,!1);const[r,n]=Ne(),o=()=>ye(C,"$shearDeformationParameterStore",r);let c=re(t,"disabled",8,!1),i=re(t,"step",8,5),l=D(),s=D(!1),a=D(""),m=null;function f(_){let d=_,E=!1,S="";_<b.LAGERLAENGE_MIN?(d=b.LAGERLAENGE_MIN,E=!0,S=`${z("shearDeformation.parameters.minValue")}: ${b.LAGERLAENGE_MIN} mm`):_>b.LAGERLAENGE_MAX&&(d=b.LAGERLAENGE_MAX,E=!0,S=`${z("shearDeformation.parameters.maxValue")}: ${b.LAGERLAENGE_MAX} mm`),E&&(M(s,!0),M(a,S),m&&clearTimeout(m),m=setTimeout(()=>{M(s,!1),M(a,"")},3e3)),C.updateField("b",d)}le(()=>o(),()=>{M(l,o().b)}),Ae(),_e();var u=Dr(),g=Y(u);Ie(g,{children:(_,d)=>{de();var E=Rr(),S=Y(E),v=W(S);Ge(v,{get formula(){return De.b}}),Te(I=>Le(S,`${I??""} `),[()=>z("shearDeformation.parameters.bearingLength")],ue),O(_,E)},$$slots:{default:!0}});var p=W(g,2);const h=ue(()=>c()||o().is_streifen===1);Re(p,{size:"sm",get step(){return i()},helperText:"mm",get disabled(){return w(h)},get min(){return b.LAGERLAENGE_MIN},get max(){return b.LAGERLAENGE_MAX},light:!0,get invalid(){return w(s)},get invalidText(){return w(a)},get value(){return w(l)},set value(_){M(l,_)},$$events:{change:()=>f(w(l))},$$legacy:!0}),O(e,u),me(),n()}var zr=F(" <!>",1),Pr=F("<!> <!>",1);function cn(e,t){fe(t,!1);const[r,n]=Ne(),o=()=>ye(C,"$shearDeformationParameterStore",r);let c=re(t,"step",8,5),i=D(),l=D(!1),s=D(""),a=null;function m(p){let h=p,_=!1,d="";p<b.BETONDECKUNG_MIN?(h=b.BETONDECKUNG_MIN,_=!0,d=`${z("shearDeformation.parameters.minValue")}: ${b.BETONDECKUNG_MIN} mm`):p>b.BETONDECKUNG_MAX&&(h=b.BETONDECKUNG_MAX,_=!0,d=`${z("shearDeformation.parameters.maxValue")}: ${b.BETONDECKUNG_MAX} mm`),_&&(M(l,!0),M(s,d),a&&clearTimeout(a),a=setTimeout(()=>{M(l,!1),M(s,"")},3e3)),C.updateField("c_nom",h)}le(()=>o(),()=>{M(i,o().c_nom)}),Ae(),_e();var f=Pr(),u=Y(f);Ie(u,{children:(p,h)=>{de();var _=zr(),d=Y(_),E=W(d);Ge(E,{get formula(){return De.c_nom}}),Te(S=>Le(d,`${S??""} `),[()=>z("shearDeformation.parameters.concreteCovernominal")],ue),O(p,_)},$$slots:{default:!0}});var g=W(u,2);Re(g,{size:"sm",get step(){return c()},helperText:"mm",get min(){return b.BETONDECKUNG_MIN},get max(){return b.BETONDECKUNG_MAX},light:!0,get invalid(){return w(l)},get invalidText(){return w(s)},get value(){return w(i)},set value(p){M(i,p)},$$events:{change:()=>m(w(i))},$$legacy:!0}),O(e,f),me(),n()}var $r=F(" <!>",1),Cr=F("<!> <!>",1);function ln(e,t){fe(t,!1);const[r,n]=Ne(),o=()=>ye(C,"$shearDeformationParameterStore",r),c=D();let i=re(t,"step",8,1),l=D(),s=D(!1),a=D(""),m=null;function f(h){let _=h,d=!1,E="";h<b.BEMESSUNGSLAST_MIN?(_=b.BEMESSUNGSLAST_MIN,d=!0,E=`${z("shearDeformation.parameters.minValue")}: ${b.BEMESSUNGSLAST_MIN} ${w(c)}`):h>b.BEMESSUNGSLAST_MAX&&(_=b.BEMESSUNGSLAST_MAX,d=!0,E=`${z("shearDeformation.parameters.maxValue")}: ${b.BEMESSUNGSLAST_MAX} ${w(c)}`),d&&(M(s,!0),M(a,E),m&&clearTimeout(m),m=setTimeout(()=>{M(s,!1),M(a,"")},3e3)),C.updateField("ff_zd",_)}le(()=>o(),()=>{M(l,o().ff_zd)}),le(()=>o(),()=>{M(c,o().is_streifen?"kN/m":"kN")}),Ae(),_e();var u=Cr(),g=Y(u);Ie(g,{children:(h,_)=>{de();var d=$r(),E=Y(d),S=W(E);Ge(S,{get formula(){return De.ff_zd}}),Te(v=>Le(E,`${v??""} `),[()=>z("shearDeformation.parameters.designLoad")],ue),O(h,d)},$$slots:{default:!0}});var p=W(g,2);Re(p,{size:"sm",get step(){return i()},get helperText(){return w(c)},get min(){return b.BEMESSUNGSLAST_MIN},get max(){return b.BEMESSUNGSLAST_MAX},light:!0,get invalid(){return w(s)},get invalidText(){return w(a)},get value(){return w(l)},set value(h){M(l,h)},$$events:{change:()=>f(w(l))},$$legacy:!0}),O(e,u),me(),n()}function Br(e){Bt(e,-10)}function kr(e){return e.add(new sr(9272444,4802918,6)),kt(e,0,500,500,16777215,2)}function At(e){const t=[],r=e.n_b;for(let n=0;n<r;n++){let o=0;if(r===2){const c=e.b/1e3;o=n===0?c/5:-c/5}t.push(o)}return t}function mt(e,t){const r=new We;if(!t.is_dorn)return e.add(r),r;const n=new ir({color:16777215,metalness:.85,roughness:.2}),o=(50+t.b*.2)/1e3,c=t.d_b/2/1e3*.8,i=oe();return At(t).forEach(s=>{const a=new X(new cr(c,c,o,16),n);a.position.set(i.centerX,i.centerY+o/2,i.centerZ+s),a.castShadow=!0,a.receiveShadow=!0,r.add(a)}),e.add(r),r}function dt(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(n=>n.dispose()):r.material.dispose())}),e.remove(t))}const Or=400,Xr=400,Fr=10,Ur=.4,Hr=.4,Vr=.01;function _t(e,t){const r=new We,n=new lr({color:Ot,shininess:100,specular:2236962}),o=(t.a-Or)/1e3,c=(t.b-Xr)/1e3,i=(t.t-Fr)*2/1e3,l=Ur+o,s=Hr+c,a=Vr+i;let m;if(t.is_dorn){const d=new ur;d.moveTo(-l/2,-s/2),d.lineTo(l/2,-s/2),d.lineTo(l/2,s/2),d.lineTo(-l/2,s/2),d.lineTo(-l/2,-s/2);const E=At(t),S=t.d_b/2/1e3;E.forEach(I=>{const T=new fr;T.absarc(0,I,S,0,Math.PI*2,!1),d.holes.push(T)});const v={depth:a,bevelEnabled:!1};m=new mr(d,v),m.translate(0,0,-a/2),m.rotateX(-Math.PI/2)}else m=new dr(l,a,s);const f=new X(m,n),u=oe();f.position.set(u.centerX,u.centerY+a/2,u.centerZ),f.castShadow=!0,f.receiveShadow=!0,r.add(f),e.add(r),f.geometry.computeBoundingBox();const g=new St;g.setFromObject(f);const p=u.centerY;return{group:r,boundingBox:g,height:p,lengthDiffX:o,lengthDiffZ:c}}function ht(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(n=>n.dispose()):r.material.dispose())}),e.remove(t))}function Zr(){const{subscribe:e,set:t,update:r}=xe({renderer:null,camera:null,controls:null,scene:null});return{subscribe:e,setScene:n=>{r(o=>({...o,...n}))},reset:()=>{t({renderer:null,camera:null,controls:null,scene:null})},captureScreenshot:async(n=!1)=>new Promise((o,c)=>{const i={renderer:null,camera:null,controls:null,scene:null};if(e(a=>{i.renderer=a.renderer,i.camera=a.camera,i.controls=a.controls,i.scene=a.scene})(),!i.renderer||!i.camera||!i.scene){c(new Error("Scene not initialized"));return}const s=()=>{if(!i.renderer||!i.camera||!i.scene){c(new Error("Scene not initialized"));return}i.renderer.render(i.scene,i.camera);const a=i.renderer.domElement.toDataURL("image/png");o(a)};n?(Mt(),setTimeout(s,1200)):s()})}}const gt=Zr();var Yr=F('<!> <div class="top-view-button-container svelte-1mle02r"><!></div>',1),Wr=F('<div class="scene-container svelte-1mle02r"><!></div>');function un(e,t){fe(t,!1),re(t,"autoRotate",8,!1);let r=re(t,"showTooltip",8,!0),n;const o=.05,c=.001,i=.04,l=new A(-1.67,1.4,.02);let s=D(),a,m,f,u,g,p,h,_,d,E,S,v,I;Lt(async()=>{a=Xt(),f=Ft(w(s)),Br(a),d=kr(a),m=Ut(35),m.position.copy(l),I=C.subscribe(async G=>{if(n=G,a&&h!==void 0){p&&st(a,p),h&&ht(a,h),_&&dt(a,_),Ye(a),it(a),p=at(a,n,!1),h=_t(a,n).group,_=mt(a,n),await lt(a);const R=oe();let he=Math.max(n.c_nom/1e3,.03);n.is_streifen===1&&(he=.1);const ge=new A(R.centerX+o+n.a/2e3,R.centerY+c,R.centerZ+i+n.b/2e3+he);await ct(a,ge),u&&(u.target.set(R.centerX,R.centerY,R.centerZ),u.update())}});const L=oe(),K=[L.centerX,L.centerY,L.centerZ];u=Ht(m,f,K),gt.setScene({renderer:f,camera:m,controls:u,scene:a}),E=Lr(f,m,u),S=Nr(w(s)),p=at(a,n,!1),h=_t(a,n).group,_=mt(a,n),await lt(a);let $=n.c_nom/1e3;n.is_streifen===1&&($=.1);const U=new A(L.centerX+o+n.a/2e3,L.centerY+c+.001,L.centerZ+i+n.b/2e3+$);await ct(a,U);const k=1e3/30;let H=0;const j=G=>{v=requestAnimationFrame(j);const V=G-H;if(!(V<k)){if(H=G-V%k,vr(G,m,u),Vt(u),d&&m){const R=new A(0,500,500);R.applyQuaternion(m.quaternion),d.position.copy(m.position).add(R),u&&u.target&&(d.target.position.copy(u.target),d.target.updateMatrixWorld())}f.render(a,m)}};if(j(0),await xt(),w(s)&&w(s)instanceof Element){let G=!1;g=new ResizeObserver(()=>{w(s)&&f&&m&&!G&&(G=!0,requestAnimationFrame(()=>{if(w(s)&&f&&m){const V=w(s).clientWidth,R=w(s).clientHeight;m.aspect=V/R,m.updateProjectionMatrix(),f.setSize(V,R)}G=!1}))}),g.observe(w(s))}}),Nt(()=>{gt.reset(),v!==void 0&&cancelAnimationFrame(v),E&&E(),S&&S(),I&&I(),g&&g.disconnect(),u&&u.dispose(),f&&f.dispose(),p&&a&&st(a,p),h&&a&&ht(a,h),_&&a&&dt(a,_),a&&Ye(a),a&&it(a)}),_e();var T=Wr(),P=Je(T);{var y=L=>{var K=Yr(),N=Y(K);Zt(N,{});var $=W(N,2),U=Je($);Yt(U,{size:"small",kind:"secondary",$$events:{click:()=>Mt()},children:(B,k)=>{de();var H=vt("Draufsicht");O(B,H)},$$slots:{default:!0}}),Qe($),O(L,K)};yt(P,L=>{r()&&L(y)})}Qe(T),Wt(T,L=>M(s,L),()=>w(s)),O(e,T),me()}export{ln as B,b as I,an as L,un as S,sn as a,cn as b,gt as c,pr as d,gr as e,_r as l,Xe as p,C as s};

var Vs=Object.defineProperty;var Gs=(s,t,e)=>t in s?Vs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var V=(s,t,e)=>Gs(s,typeof t!="symbol"?t+"":t,e);import{aN as Ws,aZ as qs,am as Ks,b as Xs,C as Qs,a as Js,U as tn,h as Ue,B as en,c as sn,p as ht,o as Zt,w as At,x as Lt,aJ as Tt,k as g,v as ns,aK as Gt,y as q,l as ye,z as K,e as Z,j as dt,t as mt,f as ut,g as kt,a7 as O,s as et,G as is,F as nn,A as os,as as on,av as an}from"./D5TzYziX.js";import"./CWj6FrbW.js";import{a as as,e as rn}from"./DmUqM0j9.js";import{s as J,w as Wt,g as be,o as ln,d as cn}from"./BcXkIIq8.js";import{l as Vt,p as ct,i as we,a as qt,s as Kt}from"./CzdfMhiI.js";import{a as Xt,t as z,e as rs,i as ls}from"./CiKHEnQQ.js";import{S as Qt,d as Pt,e as hn}from"./Cwr-c62u.js";import{T as cs,I as hs,B as dn}from"./XzzZKDRi.js";import{b as un}from"./Dq9vKEuN.js";import{a as pn,b as fn}from"./C8iUxtos.js";import{k as _n,c as y,l as Mt,T as Et,Q as Ye,m as ue,V as W,n as mn,o as gn,p as ds,q as yn,r as bn,s as wn,t as xe,u as xn,v as Jt,M as N,h as us,w as rt,x as ps,f as Ot,y as fs,i as nt,z as Sn,A as pe,B as ft,g as _s,a as ms,P as gs,D as vn,G as En,I as ys,J as Tn,K as He,X as Mn,e as Pn,Y as zn,d as Dn,Z as Rn,_ as Cn,$ as On,a0 as An}from"./B3HL1xbT.js";function wo(s,t,e){Ue&&en();var n=s,o=tn,i,a=Ws()?qs:Ks;Xs(()=>{a(o,o=t())&&(i&&Qs(i),i=Js(()=>e(n)))}),Ue&&(n=sn)}function Ln(s){return(pn||fn)+s}var kn=Gt("<title> </title>"),In=Gt('<svg><!><path d="M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2ZM14,21.5908l-5-5L10.5906,15,14,18.4092,21.41,11l1.5957,1.5859Z"></path><path fill="none" d="M14 21.591L9 16.591 10.591 15 14 18.409 21.41 11 23.005 12.585 14 21.591z" data-icon-path="inner-path"></path></svg>');function xo(s,t){const e=Vt(t,["children","$$slots","$$events","$$legacy"]),n=Vt(e,["size","title"]);ht(t,!1);const o=Lt(),i=Lt();let a=ct(t,"size",8,16),r=ct(t,"title",8,void 0);Zt(()=>(Tt(e),Tt(r())),()=>{At(o,e["aria-label"]||e["aria-labelledby"]||r())}),Zt(()=>(g(o),Tt(e)),()=>{At(i,{"aria-hidden":g(o)?void 0:!0,role:g(o)?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})}),ns(),Xt();var c=In();as(c,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:a(),height:a(),...g(i),...n}));var d=q(c);{var l=m=>{var h=kn(),u=q(h,!0);K(h),mt(()=>J(u,r())),Z(m,h)};we(d,m=>{r()&&m(l)})}ye(2),K(c),Z(s,c),dt()}var $n=Gt("<title> </title>"),Bn=Gt('<svg><!><path fill="none" d="M14.9 7.2H17.1V24.799H14.9z" data-icon-path="inner-path" transform="rotate(-45 16 16)"></path><path d="M16,2A13.914,13.914,0,0,0,2,16,13.914,13.914,0,0,0,16,30,13.914,13.914,0,0,0,30,16,13.914,13.914,0,0,0,16,2Zm5.4449,21L9,10.5557,10.5557,9,23,21.4448Z"></path></svg>');function So(s,t){const e=Vt(t,["children","$$slots","$$events","$$legacy"]),n=Vt(e,["size","title"]);ht(t,!1);const o=Lt(),i=Lt();let a=ct(t,"size",8,16),r=ct(t,"title",8,void 0);Zt(()=>(Tt(e),Tt(r())),()=>{At(o,e["aria-label"]||e["aria-labelledby"]||r())}),Zt(()=>(g(o),Tt(e)),()=>{At(i,{"aria-hidden":g(o)?void 0:!0,role:g(o)?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})}),ns(),Xt();var c=Bn();as(c,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:a(),height:a(),...g(i),...n}));var d=q(c);{var l=m=>{var h=$n(),u=q(h,!0);K(h),mt(()=>J(u,r())),Z(m,h)};we(d,m=>{r()&&m(l)})}ye(2),K(c),Z(s,c),dt()}const Ze={type:"change"},Se={type:"start"},bs={type:"end"},Bt=new mn,Ve=new gn,Nn=Math.cos(70*ds.DEG2RAD),I=new y,G=2*Math.PI,S={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},oe=1e-6;class Fn extends _n{constructor(t,e=null){super(t,e),this.state=S.NONE,this.target=new y,this.cursor=new y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Mt.ROTATE,MIDDLE:Mt.DOLLY,RIGHT:Mt.PAN},this.touches={ONE:Et.ROTATE,TWO:Et.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new y,this._lastQuaternion=new Ye,this._lastTargetPosition=new y,this._quat=new Ye().setFromUnitVectors(t.up,new y(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new ue,this._sphericalDelta=new ue,this._scale=1,this._panOffset=new y,this._rotateStart=new W,this._rotateEnd=new W,this._rotateDelta=new W,this._panStart=new W,this._panEnd=new W,this._panDelta=new W,this._dollyStart=new W,this._dollyEnd=new W,this._dollyDelta=new W,this._dollyDirection=new y,this._mouse=new W,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Un.bind(this),this._onPointerDown=jn.bind(this),this._onPointerUp=Yn.bind(this),this._onContextMenu=Kn.bind(this),this._onMouseWheel=Vn.bind(this),this._onKeyDown=Gn.bind(this),this._onTouchStart=Wn.bind(this),this._onTouchMove=qn.bind(this),this._onMouseDown=Hn.bind(this),this._onMouseMove=Zn.bind(this),this._interceptControlDown=Xn.bind(this),this._interceptControlUp=Qn.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Ze),this.update(),this.state=S.NONE}update(t=null){const e=this.object.position;I.copy(e).sub(this.target),I.applyQuaternion(this._quat),this._spherical.setFromVector3(I),this.autoRotate&&this.state===S.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(n)&&isFinite(o)&&(n<-Math.PI?n+=G:n>Math.PI&&(n-=G),o<-Math.PI?o+=G:o>Math.PI&&(o-=G),n<=o?this._spherical.theta=Math.max(n,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+o)/2?Math.max(n,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let i=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),i=a!=this._spherical.radius}if(I.setFromSpherical(this._spherical),I.applyQuaternion(this._quatInverse),e.copy(this.target).add(I),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const r=I.length();a=this._clampDistance(r*this._scale);const c=r-a;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),i=!!c}else if(this.object.isOrthographicCamera){const r=new y(this._mouse.x,this._mouse.y,0);r.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),i=c!==this.object.zoom;const d=new y(this._mouse.x,this._mouse.y,0);d.unproject(this.object),this.object.position.sub(d).add(r),this.object.updateMatrixWorld(),a=I.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(Bt.origin.copy(this.object.position),Bt.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Bt.direction))<Nn?this.object.lookAt(this.target):(Ve.setFromNormalAndCoplanarPoint(this.object.up,this.target),Bt.intersectPlane(Ve,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),i=!0)}return this._scale=1,this._performCursorZoom=!1,i||this._lastPosition.distanceToSquared(this.object.position)>oe||8*(1-this._lastQuaternion.dot(this.object.quaternion))>oe||this._lastTargetPosition.distanceToSquared(this.target)>oe?(this.dispatchEvent(Ze),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?G/60*this.autoRotateSpeed*t:G/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){I.setFromMatrixColumn(e,0),I.multiplyScalar(-t),this._panOffset.add(I)}_panUp(t,e){this.screenSpacePanning===!0?I.setFromMatrixColumn(e,1):(I.setFromMatrixColumn(e,0),I.crossVectors(this.object.up,I)),I.multiplyScalar(t),this._panOffset.add(I)}_pan(t,e){const n=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;I.copy(o).sub(this.target);let i=I.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*i/n.clientHeight,this.object.matrix),this._panUp(2*e*i/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),o=t-n.left,i=e-n.top,a=n.width,r=n.height;this._mouse.x=o/a*2-1,this._mouse.y=-(i/r)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(G*this._rotateDelta.x/e.clientHeight),this._rotateUp(G*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(G*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-G*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(G*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-G*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),o=.5*(t.pageY+e.y);this._rotateStart.set(n,o)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),o=.5*(t.pageY+e.y);this._panStart.set(n,o)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,o=t.pageY-e.y,i=Math.sqrt(n*n+o*o);this._dollyStart.set(0,i)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{const n=this._getSecondPointerPosition(t),o=.5*(t.pageX+n.x),i=.5*(t.pageY+n.y);this._rotateEnd.set(o,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(G*this._rotateDelta.x/e.clientHeight),this._rotateUp(G*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),o=.5*(t.pageY+e.y);this._panEnd.set(n,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,o=t.pageY-e.y,i=Math.sqrt(n*n+o*o);this._dollyEnd.set(0,i),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(t.pageX+e.x)*.5,r=(t.pageY+e.y)*.5;this._updateZoomParameters(a,r)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new W,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,n={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function jn(s){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(s.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(s)&&(this._addPointer(s),s.pointerType==="touch"?this._onTouchStart(s):this._onMouseDown(s)))}function Un(s){this.enabled!==!1&&(s.pointerType==="touch"?this._onTouchMove(s):this._onMouseMove(s))}function Yn(s){switch(this._removePointer(s),this._pointers.length){case 0:this.domElement.releasePointerCapture(s.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(bs),this.state=S.NONE;break;case 1:const t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function Hn(s){let t;switch(s.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Mt.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(s),this.state=S.DOLLY;break;case Mt.ROTATE:if(s.ctrlKey||s.metaKey||s.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(s),this.state=S.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(s),this.state=S.ROTATE}break;case Mt.PAN:if(s.ctrlKey||s.metaKey||s.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(s),this.state=S.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(s),this.state=S.PAN}break;default:this.state=S.NONE}this.state!==S.NONE&&this.dispatchEvent(Se)}function Zn(s){switch(this.state){case S.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(s);break;case S.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(s);break;case S.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(s);break}}function Vn(s){this.enabled===!1||this.enableZoom===!1||this.state!==S.NONE||(s.preventDefault(),this.dispatchEvent(Se),this._handleMouseWheel(this._customWheelEvent(s)),this.dispatchEvent(bs))}function Gn(s){this.enabled!==!1&&this._handleKeyDown(s)}function Wn(s){switch(this._trackPointer(s),this._pointers.length){case 1:switch(this.touches.ONE){case Et.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(s),this.state=S.TOUCH_ROTATE;break;case Et.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(s),this.state=S.TOUCH_PAN;break;default:this.state=S.NONE}break;case 2:switch(this.touches.TWO){case Et.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(s),this.state=S.TOUCH_DOLLY_PAN;break;case Et.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(s),this.state=S.TOUCH_DOLLY_ROTATE;break;default:this.state=S.NONE}break;default:this.state=S.NONE}this.state!==S.NONE&&this.dispatchEvent(Se)}function qn(s){switch(this._trackPointer(s),this.state){case S.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(s),this.update();break;case S.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(s),this.update();break;case S.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(s),this.update();break;case S.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(s),this.update();break;default:this.state=S.NONE}}function Kn(s){this.enabled!==!1&&s.preventDefault()}function Xn(s){s.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Qn(s){s.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class Jn extends yn{constructor(t){super(t)}load(t,e,n,o){const i=this,a=new bn(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(r){const c=i.parse(JSON.parse(r));e&&e(c)},n,o)}parse(t){return new ti(t)}}class ti{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],o=ei(t,e,this.data);for(let i=0,a=o.length;i<a;i++)n.push(...o[i].toShapes());return n}}function ei(s,t,e){const n=Array.from(s),o=t/e.resolution,i=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*o,a=[];let r=0,c=0;for(let d=0;d<n.length;d++){const l=n[d];if(l===`
`)r=0,c-=i;else{const m=si(l,o,r,c,e);r+=m.offsetX,a.push(m.path)}}return a}function si(s,t,e,n,o){const i=o.glyphs[s]||o.glyphs["?"];if(!i){console.error('THREE.Font: character "'+s+'" does not exists in font family '+o.familyName+".");return}const a=new wn;let r,c,d,l,m,h,u,p;if(i.o){const f=i._cachedOutline||(i._cachedOutline=i.o.split(" "));for(let _=0,b=f.length;_<b;)switch(f[_++]){case"m":r=f[_++]*t+e,c=f[_++]*t+n,a.moveTo(r,c);break;case"l":r=f[_++]*t+e,c=f[_++]*t+n,a.lineTo(r,c);break;case"q":d=f[_++]*t+e,l=f[_++]*t+n,m=f[_++]*t+e,h=f[_++]*t+n,a.quadraticCurveTo(m,h,d,l);break;case"b":d=f[_++]*t+e,l=f[_++]*t+n,m=f[_++]*t+e,h=f[_++]*t+n,u=f[_++]*t+e,p=f[_++]*t+n,a.bezierCurveTo(m,h,u,p,d,l);break}}return{offsetX:i.ha*t,path:a}}class ni extends xe{constructor(t,e={}){const n=e.font;if(n===void 0)super();else{const o=n.generateShapes(t,e.size);e.depth===void 0&&(e.depth=50),e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(o,e)}this.type="TextGeometry"}}const ws=[{diameter:200,type:2,t_1:8,n:[2,3,4]},{diameter:250,type:2,t_1:8,n:[2,3,4]},{diameter:300,type:3,t_1:8,n:[3,4,5,6]},{diameter:350,type:4,t_1:8,n:[3,4,5,6,7]},{diameter:400,type:5,t_1:12,n:[3,4,5,6]},{diameter:450,type:5,t_1:12,n:[3,4,5,6]},{diameter:500,type:6,t_1:12,n:[3,4,5,6,7]},{diameter:550,type:7,t_1:12,n:[4,5,6,7,8]},{diameter:600,type:8,t_1:12,n:[4,5,6,7,8,9]},{diameter:650,type:9,t_1:12,n:[4,5,6,7,8,9,10]},{diameter:700,type:10,t_1:16,n:[4,5,6,7,8,9]},{diameter:750,type:10,t_1:16,n:[4,5,6,7,8,9]},{diameter:850,type:11,t_1:16,n:[4,5,6,7,8,9,10]},{diameter:900,type:12,t_1:20,n:[4,5,6,7,8,9,10]}],ve=[{length:100,width:150,t_1:8,n:[2,3]},{length:100,width:200,t_1:8,n:[2,3]},{length:150,width:200,t_1:8,n:[2,3,4]},{length:150,width:250,t_1:8,n:[2,3,4]},{length:150,width:300,t_1:8,n:[2,3,4]},{length:200,width:250,t_1:8,n:[3,4,5,6]},{length:200,width:300,t_1:8,n:[3,4,5,6]},{length:200,width:350,t_1:8,n:[3,4,5,6]},{length:200,width:400,t_1:8,n:[3,4,5,6]},{length:250,width:300,t_1:8,n:[3,4,5,6,7]},{length:250,width:400,t_1:8,n:[3,4,5,6,7]},{length:300,width:400,t_1:12,n:[3,4,5,6]},{length:300,width:500,t_1:12,n:[3,4,5,6]},{length:300,width:600,t_1:12,n:[3,4,5,6]},{length:350,width:450,t_1:12,n:[3,4,5,6,7]},{length:400,width:500,t_1:12,n:[4,5,6,7,8]},{length:400,width:600,t_1:12,n:[4,5,6,7,8]},{length:450,width:600,t_1:12,n:[4,5,6,7,8,9]},{length:500,width:600,t_1:12,n:[4,5,6,7,8,9,10]},{length:600,width:600,t_1:16,n:[4,5,6,7,8,9]},{length:600,width:700,t_1:16,n:[4,5,6,7,8,9]},{length:800,width:800,t_1:20,n:[4,5,6,7,8,9,10]},{length:900,width:900,t_1:20,n:[4,5,6,7,8,9,10,11]}];function ii(s,t){const e=ve.find(n=>n.length===s&&n.width===t);return e?e.n.map(n=>({t_1:e.t_1,n})):[]}function oi(s){const t=ws.find(e=>e.diameter===s);return t?t.n.map(e=>({t_1:t.t_1,n:e})):[]}function ai(){const s={calculationResult:null},{subscribe:t,set:e,update:n}=Wt(s),o={subscribe:t,set:i=>{e(i)},update:i=>{n(i)},reset:()=>{e(s)},setCalculationResult:i=>{o.update(a=>({...a,calculationResult:i}))},clearCalculationResult:()=>{o.update(i=>({...i,calculationResult:null}))},getCalculationSuccess:()=>{let i=null;if(t(c=>{i=c.calculationResult})(),!i)return!1;const r=i;return r.VerformungUnterDruckSuccess&&r.VerformungUnterSchubSuccess&&r.VerformungWinkelverdrehungSuccess&&r.SummeDerTeilverformungenSuccess&&r.VerdrehungsgrenzbedingungSuccess&&r.MindestpressungLagertypBSuccess&&r.GleitnachweisSuccess&&r.StabilitaetSuccess},areAllSuccessFlagsTrue:()=>{let i=null;if(t(c=>{i=c.calculationResult})(),!i)return!1;const r=i;return r.VerformungUnterDruckSuccess&&r.VerformungUnterSchubSuccess&&r.VerformungWinkelverdrehungSuccess&&r.SummeDerTeilverformungenSuccess&&r.VerdrehungsgrenzbedingungSuccess&&r.MindestpressungLagertypBSuccess&&r.GleitnachweisSuccess&&r.StabilitaetSuccess}};return o}const xs=ai();function ri(s,t,e){for(let n=0;n<t.length-1;n++)if(s>=t[n]&&s<=t[n+1]){const o=(s-t[n])/(t[n+1]-t[n]);return e[n]+o*(e[n+1]-e[n])}return s<t[0]?e[0]:e[e.length-1]}function li(s){const t=s.t_1,e=s.n,n=s.gg,o=s.ee_b,i=s.is_round,a=s.a,r=s.b,c=s.d,d=s.is_ztv_ing,l=s.is_typ_b,m=s.is_typ_c,h=s.ff_zd1,u=s.v_x1,p=s.v_y1,f=s.alpha_b1,_=s.alpha_a1,b=s.ff_zd2,x=s.v_x2,v=s.v_y2,E=s.alpha_b2,L=s.alpha_a2;if(l&&m)throw new Error("Lager cannot be both Typ B and Typ C");const A=2.5,M=Math.max(Math.abs(h),Math.abs(b)),U=Math.max(Math.abs(u),Math.abs(x)),tt=Math.max(Math.abs(p),Math.abs(v)),w=t*e,k=w+2*A;let Y,F,j,H,$,D,B,Q=0,yt=0,it=0;if(i){if(!c)throw new Error("Diameter (d) is required for round bearings");Y=Math.round(Math.PI*c**2/4),Q=c-10,F=Math.round(Math.PI*Q**2/4),j=Math.round(F*(1-Math.sqrt(U**2+tt**2)/Q)),H=Math.round(Q/(4*t)*100)/100,$=Math.round(Q/(4*A)*100)/100,D=0,B=0}else{if(!a||!r)throw new Error("Length (a) and width (b) are required for rectangular bearings");Y=a*r,D=a-10,B=r-10,F=D*B,j=Math.round(F*(1-U/D-tt/B)),it=2*(D+B),H=Math.round(F/(it*t)*100)/100,$=Math.round(F/(it*A)*100)/100;const P=[.5,.75,1,1.2,1.25,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2,2.5,10],pt=[137,100,86.2,80.4,79.3,78.4,76.7,75.3,74.1,73.1,72.2,71.5,70.8,68.3,61.9];yt=Math.round(ri(r/a,P,pt)*10)/10}const Me=235,Pe=1.3,te=3,Ps=1,ze=Math.round(1e3*(Pe*M*(t*2)*1/(j*Me))*10)/10,De=Math.max(t>12?5:t>8?4:3,ze),zs=k+(e-1)*De,Re=[],ot=(P,pt,bt)=>{(P[pt]===null||bt>P[pt])&&(P[pt]=bt)},T={epsi_cd:null,epsi_qd:null,epsi_ad:null,epsi_td:null,verdreh_nachw:null,stab_nachw:null,rr_x:null,rr_y:null,mm:null};l&&(T.sigma_cdmin=null,T.nachw_gleit=null);const Ce=e*t**3,Ds=[{ff_zd:h,v_x:u,v_y:p,alpha_b:f,alpha_a:_},{ff_zd:b,v_x:x,v_y:v,alpha_b:E,alpha_a:L}];for(const P of Ds){const pt=Math.sqrt(P.v_x**2+P.v_y**2),bt=Math.sqrt(P.alpha_a**2+P.alpha_b**2),Be=Math.round(1.5*P.ff_zd*1e3/(n*j*H)*1e3)/1e3,Ne=Math.round(pt/k*1e3)/1e3;let It;i?It=Math.round(bt*Q**2*t/(2*Ce*1e3)*1e3)/1e3:It=Math.round((P.alpha_b*D**2+P.alpha_a*B**2)*t/(2*Ce*1e3)*1e3)/1e3;const Is=Math.round((Be+Ne+It)*1e3)/1e3;ot(T,"epsi_cd",Be),ot(T,"epsi_qd",Ne),ot(T,"epsi_ad",It),ot(T,"epsi_td",Is);const Fe=Math.round(Y*n*P.v_x/(w*1e3)*100)/100,je=Math.round(Y*n*P.v_y/(w*1e3)*100)/100;let ee;i?ee=Math.round(n*bt*Math.PI*Q**6/(512*e*t**3*1e3**3)*100)/100:ee=Math.round(n*bt*D**5*B/(e*t**3*yt*1e3**3)*100)/100,ot(T,"rr_x",Fe),ot(T,"rr_y",je),ot(T,"mm",ee);let $t=1e3*P.ff_zd/F;d&&m&&$t<3&&($t=3);const $s=$t*t*(1/(5*n*H**2)+1/o),Bs=$t*A*(1/(5*n*$**2)+1/o),Ns=Math.round((Bs+e*$s)*1e3)/1e3;let se;i?se=Math.round(Q*Math.sqrt(P.alpha_b**2+P.alpha_a**2)/(te*1e3)*1e3)/1e3:se=Math.round((D*P.alpha_b+B*P.alpha_a)/(te*1e3)*1e3)/1e3;const Fs=Math.round(se/Ns*1e3)/1e3;ot(T,"verdreh_nachw",Fs);const js=Math.round(1e3*P.ff_zd/j*1e3)/1e3;let ne;i?ne=Math.round(2*Q*n*H/(3*w)*1e3)/1e3:ne=Math.round(2*D*n*H/(3*w)*1e3)/1e3;const Us=Math.round(js/ne*1e3)/1e3;if(ot(T,"stab_nachw",Us),l){const ie=Math.round(P.ff_zd*1e3/j*100)/100;(T.sigma_cdmin===null||T.sigma_cdmin>ie)&&(T.sigma_cdmin=ie);const Ys=.1+1.5*.2/ie,Hs=Math.sqrt(Fe**2+je**2),Zs=Math.round(Hs/(P.ff_zd*Ys)*1e3)/1e3;ot(T,"nachw_gleit",Zs)}}const Rs=T.epsi_cd??0,Oe=T.epsi_qd??0,Cs=T.epsi_ad??0,Ae=T.epsi_td??0,Le=T.verdreh_nachw??0,ke=T.stab_nachw??0,Os=T.rr_x??0,As=T.rr_y??0,Ls=T.mm??0,Ie=T.sigma_cdmin??0,$e=T.nachw_gleit??0,ks={epsi_cd:Rs,epsi_qd:Oe,epsi_ad:Cs,epsi_td:Ae,verdreh_nachw:Le,sigma_cdmin:Ie,nachw_gleit:$e,stab_nachw:ke,rr_x:Os,rr_y:As,t_smin:ze,mm:Ls,VerformungUnterDruckSuccess:!0,VerformungUnterSchubSuccess:Oe<=1,VerformungWinkelverdrehungSuccess:!0,SummeDerTeilverformungenSuccess:Ae<=7,VerdrehungsgrenzbedingungSuccess:Le<=1,MindestpressungLagertypBSuccess:!l||Ie>=3,GleitnachweisSuccess:!l||$e<=1,StabilitaetSuccess:ke<=1,t_2:A,tt_e:w,tt_q:k,tt_b:zs,aa:Y,a_str:D,b_str:B,d_str:Q,aa_str:F,aa_r:j,ss_1:H,t_s:De,gg:n,ee_b:o,f_y:Me,kk_p:Pe,kk_rd:te,kk_l:Ps,kk_s:yt};return Re.push(ks),Re}let R;function Ss(s){R=s||be(X);const t={is_round:R.isRound,a:R.a,b:R.b,d:R.d,t_1:R.t_1,n:R.n,gg:R.gg_d,ee_b:R.ee_b,is_ztv_ing:R.VorgabenZTVING,is_typ_b:R.l_typ==="B",is_typ_c:R.l_typ==="C",ff_zd1:R.ff_zd1,ff_zd2:R.ff_zd2,v_x1:R.v_x1,v_x2:R.v_x2,v_y1:R.v_y1,v_y2:R.v_y2,alpha_b1:R.alpha_b1,alpha_b2:R.alpha_b2,alpha_a1:R.alpha_a1,alpha_a2:R.alpha_a2},e=li(t);xs.setCalculationResult(e[0]||null)}const Ge=Wt(!1);function zt(s,t={}){const{width:e=50,height:n=50,depth:o=50,position:i={x:0,y:0,z:0},color:a=4886754,widthSegments:r=1,heightSegments:c=1,depthSegments:d=1}=t,l=new us(e,n,o,r,c,d),m=new Jt({color:a,shininess:100,specular:2236962}),h=new N(l,m);return h.position.set(i.x,i.y,i.z),h.castShadow=!0,h.receiveShadow=!0,s.add(h),h}function Dt(s,t={}){const{radius:e=25,height:n=50,position:o={x:0,y:0,z:0},color:i=4886754,radialSegments:a=32,heightSegments:r=1}=t,c=new xn(e,e,n,a,r),d=new Jt({color:i,shininess:100,specular:2236962}),l=new N(c,d);return l.position.set(o.x,o.y,o.z),l.castShadow=!0,l.receiveShadow=!0,s.add(l),l}function ae(s,t={}){const{width:e=50,height:n=50,depth:o=50,extrudeDepth:i=20,position:a={x:0,y:0,z:0},color:r=4886754}=t,c=new ps,d=e/2,l=n/2;c.moveTo(-d,-l),c.lineTo(d,-l),c.lineTo(d,l),c.lineTo(-d,l),c.lineTo(-d,-l);const m={depth:i,bevelEnabled:!1,steps:1,curveSegments:1},h=new xe(c,m);h.computeBoundingBox();const u=h.boundingBox,p=new y;u.getCenter(p),h.translate(-p.x,-p.y,-p.z);const f=new Jt({color:r,shininess:100,specular:2236962}),_=new N(h,f);return _.position.set(a.x,a.y,a.z),_.castShadow=!0,_.receiveShadow=!0,s.add(_),_}function We(s){s.geometry.computeBoundingBox(),s.updateMatrixWorld(!0);const t=new Ot().setFromObject(s),e=new y;t.getCenter(e);const n=new y(e.x,t.max.y,e.z),o=new y(e.x,t.min.y,e.z);return{mesh:s,boundingBox:t.clone(),centerPoint:e.clone(),upperPoint:n.clone(),lowerPoint:o.clone()}}function re(s,t){const e=We(t),n=We(s),o=e.upperPoint,i=n.centerPoint.y-n.lowerPoint.y,a=o.y+i;s.position.y=a}function ci(s,t){s.remove(t),t.geometry.dispose(),t.material instanceof rt&&t.material.dispose()}let le=null,wt=null;const Nt=11765,hi=.03,di=2e-4;async function vs(){return le||wt||(wt=new Promise((s,t)=>{new Jn().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",n=>{le=n,wt=null,s(n)},void 0,n=>{wt=null,t(n)})}),wt)}function fe(s,t,e){return new ni(s,{font:t,size:e,depth:di,curveSegments:12,bevelEnabled:!0,bevelThickness:3e-4,bevelSize:2e-4,bevelOffset:0,bevelSegments:3})}function _e(s){s.computeBoundingBox();const t=s.boundingBox;if(t){const e=-(t.max.x-t.min.x)/2,n=-(t.max.y-t.min.y)/2;s.translate(e,n,0)}}function me(s){return new fs({color:s,metalness:.3,roughness:.4})}function ui(s,t,e,n,o,i=.05,a){const r=new y(-n.z,0,n.x).normalize(),c=new ft().setFromPoints([new y(t.x-r.x*i/2,t.y,t.z-r.z*i/2),new y(t.x+r.x*i/2,t.y,t.z+r.z*i/2)]),d=new nt(c,o);s.add(d),a.push(d);const l=new ft().setFromPoints([new y(e.x-r.x*i/2,e.y,e.z-r.z*i/2),new y(e.x+r.x*i/2,e.y,e.z+r.z*i/2)]),m=new nt(l,o);s.add(m),a.push(m)}function pi(s,t){return t.forEach(e=>{s.remove(e),e instanceof N&&(e.geometry&&e.geometry.dispose(),e.material instanceof rt&&e.material.dispose()),e instanceof nt&&(e.geometry&&e.geometry.dispose(),e.material instanceof rt&&e.material.dispose()),e instanceof Sn&&e.material instanceof rt&&e.material.dispose()}),[]}function fi(s,t){return t.forEach(e=>{s.remove(e),e instanceof N&&(e.geometry&&e.geometry.dispose(),e.material instanceof rt&&e.material.dispose()),e instanceof nt&&(e.geometry&&e.geometry.dispose(),e.material instanceof rt&&e.material.dispose()),e instanceof pe&&(e.line&&e.line.geometry&&e.line.geometry.dispose(),e.line&&e.line.material instanceof rt&&e.line.material.dispose(),e.cone&&e.cone.geometry&&e.cone.geometry.dispose(),e.cone&&e.cone.material instanceof rt&&e.cone.material.dispose())}),[]}function _i(s,t){return[[s.min.x,t,s.min.z],[s.max.x,t,s.min.z],[s.min.x,t,s.max.z],[s.max.x,t,s.max.z]]}let at=[],st=[];const gt=new Map,xt=new Map;function mi(){return[...at,...st]}function qe(s){st.forEach(t=>{if(t instanceof N&&gt.has(t)){const e=gt.get(t),n=s?-Math.PI:0;t.rotation.z=e+n}})}function Ke(s){const t=xi();at.forEach(e=>{if(s)if(e instanceof nt&&e.geometry){const n=e.geometry.attributes.position;if(n){if(!xt.has(e)){const o=[];for(let i=0;i<n.count;i++)o.push(n.getY(i));xt.set(e,o)}for(let o=0;o<n.count;o++)n.setY(o,t);n.needsUpdate=!0}}else e instanceof N&&e.position&&(xt.has(e)||xt.set(e,[e.position.y]),e.position.y=t+.001);else{const n=xt.get(e);if(n)if(e instanceof nt&&e.geometry){const o=e.geometry.attributes.position;if(o&&n.length===o.count){for(let i=0;i<o.count;i++)o.setY(i,n[i]);o.needsUpdate=!0}}else e instanceof N&&e.position&&n.length>0&&(e.position.y=n[0])}}),s||xt.clear()}const ge=hi;async function ce(s,t,e,n,o,i=0,a=0){try{const r=await vs(),c=fe(o,r,ge);_e(c);const d=me(16711680),l=new N(c,d),m=new y(e[0]-t[0],0,e[2]-t[2]).normalize(),h=new y(-m.z,0,m.x),u=(t[0]+e[0])/2+i+h.x*n,p=(t[2]+e[2])/2+a+h.z*n;l.position.set(u,t[1]+.001,p),l.rotation.x=-Math.PI/2;const f=Math.atan2(m.z,m.x)+Math.PI;l.rotation.z=f,gt.set(l,f),s.add(l),at.push(l)}catch(r){console.error("Failed to load font for 3D text:",r)}}function he(s,t,e,n,o,i=.05){ui(s,t,e,n,o,i,at)}function Es(s){at.forEach(t=>{t instanceof N&&gt.delete(t)}),at=pi(s,at)}function gi(s){st.forEach(t=>{t instanceof N&&gt.delete(t)}),st=fi(s,st)}async function yi(s,t=new y(0,0,0)){const i=new _s({color:new ms(Nt)}),a=Nt,r=new y(t.x+.2,t.y,t.z),c=new ft().setFromPoints([t,r]),d=new nt(c,i);s.add(d),st.push(d);const l=new y(1,0,0),m=new pe(l,r,.1,a,.1*.5,.1*.3);s.add(m),st.push(m);const h=new y(t.x,t.y,t.z+.2),u=new ft().setFromPoints([t,h]),p=new nt(u,i);s.add(p),st.push(p);const f=new y(0,0,1),_=new pe(f,h,.1,a,.1*.5,.1*.3);s.add(_),st.push(_);try{const b=await vs(),x=fe(z("bridgeBearing.scene.axisLabel.x"),b,ge);_e(x);const v=me(Nt),E=new N(x,v);E.position.set(t.x+.2*1.2+.03,t.y+.001,t.z+.05),E.rotation.x=-Math.PI/2,E.rotation.z=Math.PI,gt.set(E,Math.PI),s.add(E),st.push(E);const L=fe("y",b,ge);_e(L);const A=me(Nt),M=new N(L,A);M.position.set(t.x+.05,t.y+.001,t.z+.2*1.2),M.rotation.x=-Math.PI/2,M.rotation.z=Math.PI,gt.set(M,Math.PI),s.add(M),st.push(M)}catch(b){console.error("Failed to create 3D text for coordinate system:",b)}}async function bi(s,t,e,n=0,o=0,i=!1){Es(s);const a=_i(t,e+.01);if(!a||a.length<2)return;const r=a[3],c=a[1],d=a[2],l=new _s({color:16711680}),m=be(X);if(i){let h=r,u=c,p=.1+n/2,f=0,_=new ft().setFromPoints([new y(h[0]+p,h[1],h[2]+f),new y(u[0]+p,u[1],u[2]+f)]);const b=new nt(_,l);s.add(b),at.push(b);const x=new y(h[0]+p,h[1],h[2]+f),v=new y(u[0]+p,u[1],u[2]+f),E=new y().subVectors(v,x).normalize();he(s,x,v,E,l);const L=m.d;await ce(s,h,u,-.03,`d = ${L} mm`,p,f)}else{let h=r,u=c,p=.1+n/2,f=0,_=new ft().setFromPoints([new y(h[0]+p,h[1],h[2]+f),new y(u[0]+p,u[1],u[2]+f)]);const b=new nt(_,l);s.add(b),at.push(b);const x=new y(h[0]+p,h[1],h[2]+f),v=new y(u[0]+p,u[1],u[2]+f),E=new y().subVectors(v,x).normalize();he(s,x,v,E,l);const L=m.a,A=m.b;await ce(s,h,u,-.03,`b = ${A} mm`,p,f),h=r,u=d,p=0,f=.1+o/2,_=new ft().setFromPoints([new y(h[0]+p,h[1],h[2]+f),new y(u[0]+p,u[1],u[2]+f)]);const M=new nt(_,l);s.add(M),at.push(M);const U=new y(h[0]+p,h[1],h[2]+f),tt=new y(u[0]+p,u[1],u[2]+f),w=new y().subVectors(tt,U).normalize();he(s,U,tt,w,l),await ce(s,h,u,.03,`a = ${L} mm`,p,f)}}let lt=new y(0,0,0),_t=[];function wi(s,t=[0,0,0]){const n=s.isRound,o=s.laengeElastomer*.001,i=s.diameter*.001,a=s.schichtdicke*s.anzahlSchichten*.001,r=n?i:o,c=r*.5,d=r*.1,l=c+c*.08+d+a+d,m=t[0],h=t[1]+l/2,u=t[2],p=new y(m,h,u);return console.log("calculateElastomerCenter called (predicted from params):",{params:{a:s.laengeElastomer,b:s.breiteElastomer,n:s.anzahlSchichten,t_1:s.schichtdicke},calculations:{referenceDim:r,plinthHeight:c,baseHeight:d,layerThickness:a,totalHeight:l},groundPosition:t,center:{x:p.x,y:p.y,z:p.z}}),p}function xi(){return _t.length>3&&_t[3]?_t[3].position.y:0}function Xe(s){_t.length!==0&&_t.forEach((t,e)=>{const n=t.material;e===3?(n.transparent=!1,n.opacity=1):s?e>3&&(n.visible=!1):(n.transparent=!1,n.visible=!0,n.opacity=1),n.needsUpdate=!0})}class Si{constructor(t,e){V(this,"scene");V(this,"currentElastomerObjects",[]);V(this,"camera");this.scene=t,this.camera=e}createElastomer(t,e=[0,0,0]){var yt;const n=[],i=t.isRound,a=t.laengeElastomer*.001,r=t.breiteElastomer*.001,c=t.diameter*.001,m=(((yt=be(xs).calculationResult)==null?void 0:yt.tt_e)??t.schichtdicke*t.anzahlSchichten)*.001,h=i?c:a,u=h*.5,p=h*.1,f=e[1]+u/2,_=h*.4;let b;i?b=Dt(this.scene,{radius:(c+_)/2,height:u,position:{x:e[0],y:f,z:e[2]},color:16116681}):b=zt(this.scene,{width:a+_,height:u,depth:r+_,position:{x:e[0],y:f,z:e[2]},color:16116681}),n.push(b);const x=new Ot().setFromObject(b);let v;i?v=Dt(this.scene,{radius:(c+_*.9)/2,height:u*.08,position:{x:e[0],y:0,z:e[2]},color:16116681}):v=zt(this.scene,{width:a+_*.9,height:u*.08,depth:r+_*.9,position:{x:e[0],y:0,z:e[2]},color:16116681}),n.push(v);const E=h*.2;let L;i?L=Dt(this.scene,{radius:(c+E)/2,height:p,position:{x:e[0],y:0,z:e[2]},color:12895428}):L=zt(this.scene,{width:a+E,height:p,depth:r+E,position:{x:e[0],y:0,z:e[2]},color:12895428}),n.push(L);const A=2894892,M=m;let U;i?U=Dt(this.scene,{radius:c/2,height:M,position:{x:e[0],y:0,z:e[2]},color:A}):U=zt(this.scene,{width:a,height:M,depth:r,position:{x:e[0],y:0,z:e[2]},color:A}),n.push(U);const tt=new Ot().setFromObject(U),w=x.getSize(new y),k=tt.getSize(new y),Y=w.x-k.x,F=w.z-k.z;let j;i?j=Dt(this.scene,{radius:(c+E)/2,height:p,position:{x:e[0],y:0,z:e[2]},color:12895428}):j=zt(this.scene,{width:a+E,height:p,depth:r+E,position:{x:e[0],y:0,z:e[2]},color:12895428}),n.push(j);for(let it=1;it<n.length;it++)re(n[it],n[it-1]);const H=new Ot;n.forEach(it=>H.expandByObject(it)),lt=H.getCenter(new y),console.log("Elastomer center calculated (from actual geometry):",{x:lt.x,y:lt.y,z:lt.z}),this.currentElastomerObjects=n,_t=n,bi(this.scene,tt,e[1],Y,F,i);let $,D,B;D=.01,i?($=-t.diameter*.001*1.15/2-.18,B=-(t.diameter*.001*1.15)/2-.2):($=-t.laengeElastomer*.001*1.18/2-.18,B=-(t.breiteElastomer*.001*1.18)/2-.2);const Q=new y(e[0]+$,e[1]+D,e[2]+B);return yi(this.scene,Q),n}removeCurrentElastomer(){this.currentElastomerObjects.forEach(t=>{ci(this.scene,t)}),this.currentElastomerObjects=[],_t=[],Es(this.scene),gi(this.scene)}updateElastomer(t,e=[0,0,0]){return this.removeCurrentElastomer(),this.createElastomer(t,e)}createDemoScene(t){this.createElastomer(t)}createSecondStack(t=100){const e=ae(this.scene,{width:50,height:50,extrudeDepth:20,position:{x:t,y:0,z:0},color:5294200}),n=ae(this.scene,{width:35,height:35,extrudeDepth:15,color:16753920}),o=ae(this.scene,{width:25,height:25,extrudeDepth:12,color:9662683});return re(n,e),re(o,n),{base:e,middle:n,top:o}}focusCameraOnElastomer(){}}const vi=15e4;class Ei{constructor(t){V(this,"config");V(this,"isAnimating",!0);V(this,"spherical");V(this,"cameraOffset");V(this,"isTransitioning",!1);V(this,"transitionStartTime",0);V(this,"transitionDuration",2e4);V(this,"transitionStartPosition",null);V(this,"transitionStartTarget",null);V(this,"transitionTargetPosition",null);this.config=t,this.spherical=new ue,this.cameraOffset=new y}updateConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}start(){this.isAnimating||(this.isTransitioning=!0,this.transitionStartTime=0),this.isAnimating=!0}stop(){this.isAnimating=!1,this.isTransitioning=!1}setTransitionDuration(t){this.transitionDuration=t}isActive(){return this.isAnimating}animate(t,e,n){if(!this.isAnimating||!e)return;const o=t/vi%2;let i=o<=1?o:2-o;i=(i+.5)%1;const a=ds.lerp(this.config.azimuthStart,this.config.azimuthEnd,i);this.spherical.set(this.config.radius,this.config.polarAngle,a),this.cameraOffset.setFromSpherical(this.spherical);const r=this.cameraOffset.clone().add(this.config.focusPoint);if(this.isTransitioning){this.transitionStartTime===0&&(this.transitionStartTime=t,this.transitionStartPosition=e.position.clone(),this.transitionStartTarget=n.target.clone(),this.transitionTargetPosition=r.clone());const c=t-this.transitionStartTime;if(c<this.transitionDuration){const d=c/this.transitionDuration,l=d*d*(3-2*d);e.position.lerpVectors(this.transitionStartPosition,r,l),n.target.lerpVectors(this.transitionStartTarget,this.config.focusPoint,l),n.update();return}else this.isTransitioning=!1,this.transitionStartTime=0,this.transitionStartPosition=null,this.transitionStartTarget=null,this.transitionTargetPosition=null}e.position.copy(r),n.target.copy(this.config.focusPoint),n.update()}}function Ti(s,t){const e=()=>{t.stop()},n=()=>{t.start()};return s.addEventListener("mouseenter",e),s.addEventListener("mouseleave",n),()=>{s.removeEventListener("mouseenter",e),s.removeEventListener("mouseleave",n)}}let Ts=new W,Ft,jt=null,Ut=null,St=!1,Rt=0,vt=null,C=null;function Mi(s){if(!s)return 3.5;const t=2.5,e=s.isRound?s.d:s.a,n=(e*1.5+300)/1e3;return console.log("Camera radius calculation (Brueckenlager) - isRound:",s.isRound,"dimension:",e,"(a:"+s.a+", d:"+s.d+")","scaleFactor:",n),t*n}function Ee(s){const t={radius:3.5,polarAngle:Math.PI/4,azimuthStart:0,azimuthEnd:Math.PI,focusPoint:lt};C=new Ei({...t,...s})}function Pi(s){if(console.log("regenerateCameraConfiguration (Brueckenlager) called with params:",s),C||(console.log("Automatic camera not initialized, initializing now"),Ee()),C&&s){const t=Mi(s),e={selectedHeight:s.heightOfElastomer??84.5,anzahlSchichten:s.n??6,schichtdicke:s.t_1??12,laengeElastomer:s.a??350,breiteElastomer:s.b??450,isRound:s.isRound??!1,diameter:s.d??400},n=[.3,.6,0],o=wi(e,n);console.log("=== Camera Focus Point Update (Brueckenlager) ===",{radius:t,focusPoint:{x:o.x,y:o.y,z:o.z},groundPosition:n,elastomerParams:{a:e.laengeElastomer,b:e.breiteElastomer,n:e.anzahlSchichten,t_1:e.schichtdicke,isRound:e.isRound,d:e.diameter}}),C.updateConfig({radius:t,focusPoint:o})}}function zi(s){const t=s.target.getBoundingClientRect(),e=s.clientX-t.left,n=s.clientY-t.top,o=e/s.target.clientWidth*2-1,i=-(n/s.target.clientHeight)*2+1;return new W(o,i)}function Di(s,t,e){if(!s||!t)return;const n=Ts,o=new y(n.x,n.y,1);o.unproject(s),o.sub(s.position),o.normalize();const a=s.position.distanceTo(t.target)*(1-e),r=o.clone().multiplyScalar(a);s.position.add(r),t.target.add(r),t.update()}function Ri(s=35){return new gs(s,1,.01,1e3)}function Ci(s,t,e){const n=new Fn(s,t.domElement);return n.target.set(e[0],e[1],e[2]),n.minDistance=.1,n.maxDistance=1e3,n.enableZoom=!1,n.update(),n}function Oi(s,t,e){const n=o=>{o.preventDefault(),Ts.copy(zi(o));let i=1;switch(o.deltaMode){case 2:i=1+o.deltaY*.025;break;case 1:i=1+o.deltaY*.01;break;default:i=1+o.deltaY*25e-5;break}Di(t,e,i)};return s.domElement.addEventListener("wheel",n,{passive:!1}),()=>{s.domElement.removeEventListener("wheel",n)}}function Ai(s,t,e){const n=()=>void 0;return s.addEventListener("mousemove",n),s.addEventListener("mousedown",n),s.addEventListener("wheel",n),Ft=setInterval(()=>void 0,100),()=>{s.removeEventListener("mousemove",n),s.removeEventListener("mousedown",n),s.removeEventListener("wheel",n),Ft&&(clearInterval(Ft),Ft=void 0)}}function Li(s,t,e=.002){s.update()}function ki(s,t,e){if(t&&(!St&&Qe(t)?(qe(!0),Xe(!0),Ke(!0)):St||(qe(!1),Xe(!1),Ke(!1)),C||Ee(),!!(C!=null&&C.isActive()))){if(St){Rt===0&&(Rt=s,jt=t.position.clone(),Ut=e.target.clone(),vt=$i());const o=s-Rt;if(!jt||!vt||!Ut){console.error("Top view positions not initialized properly"),St=!1;return}if(o<1e3){const i=o/1e3,a=i*i*(3-2*i);t.position.lerpVectors(jt,vt,a),e.target.lerpVectors(Ut,lt,a),t.lookAt(e.target),e.update()}else t.position.copy(vt),e.target.copy(lt),t.lookAt(e.target),e.update(),St=!1,Rt=0,jt=null,Ut=null,vt=null,C==null||C.stop();return}if(Qe(t)){C==null||C.stop();return}C&&C.animate(s,t,e)}}function Ii(s){return C||Ee(),C?Ti(s,C):()=>{}}function Qe(s,t){const e=lt,n=s.position,o=.01;return Math.abs(n.x-e.x)<o&&Math.abs(n.z-e.z)<o}function $i(){const s=lt,t=mi();if(t.length===0)return new y(s.x,s.y+3,s.z);let e=.5;const n=30;let o=0;const i=new gs(35,1,.01,1e3);for(;o<n;){i.position.set(s.x,s.y+e,s.z),i.lookAt(s),i.updateMatrixWorld(),i.updateProjectionMatrix();const a=new vn,r=new En;r.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),a.setFromProjectionMatrix(r);let c=!0;for(const d of t){d.updateMatrixWorld(!0);const l=new Ot().setFromObject(d);if(!a.intersectsBox(l)){c=!1;break}}if(c){e*=1.1;break}e*=1.2,o++}return new y(s.x,s.y+e,s.z)}function Ms(){St=!0,Rt=0,vt=null,C==null||C.start()}let Yt=null;function Je(s){Yt=s}const Bi=84.5,Ct={isRound:!1,a:350,b:450,d:400,heightOfElastomer:Bi,ff_zd1:3e3,ff_zd2:1e3,v_x1:10,v_x2:5,v_y1:0,v_y2:0,alpha_b1:15,alpha_b2:10,alpha_a1:3,alpha_a2:3,n:6,t_1:12,gg_d:.9,ee_b:2e3,l_typ:"B",VorgabenZTVING:!1};let Ht=null;function Ni(){Ht=Te(Ct);const{subscribe:s,set:t,update:e}=Wt(Ct),n={subscribe:s,set:o=>{t(o),de(o)},update:o=>{e(i=>{const a=o(i);return de(a),a})},reset:()=>{t(Ct),de(Ct)},updateField:(o,i)=>{n.update(a=>({...a,[o]:i}))}};return n}const X=Ni();Ss();function Fi(s,t){return s.lagertyp===t.lagertyp&&s.selectedCombination===t.selectedCombination&&s.selectedHeight===t.selectedHeight&&s.anzahlSchichten===t.anzahlSchichten&&s.schichtdicke===t.schichtdicke&&s.laengeElastomer===t.laengeElastomer&&s.breiteElastomer===t.breiteElastomer&&s.isRound===t.isRound&&s.diameter===t.diameter}function Te(s){const t=ve.findIndex(e=>e.length===s.a&&e.width===s.b);return{lagertyp:"B",selectedCombination:t>=0?t:0,selectedHeight:s.heightOfElastomer,anzahlSchichten:s.n,schichtdicke:s.t_1,laengeElastomer:s.a,breiteElastomer:s.b,isRound:s.isRound,diameter:s.d}}function de(s){console.log("Parameter changed callback (Brueckenlager) - a:",s.a,"b:",s.b),Ge.set(!0);const t=Te(s);Ss(s),setTimeout(()=>{Ge.set(!1)},300),Pi(s),(!Ht||!Fi(t,Ht))&&(Ht={...t},Yt&&setTimeout(()=>{Yt&&Yt(t)},10))}function ji(){return ve.map(s=>({length:s.length,width:s.width}))}var Ui=ut("<!> <!>",1);function vo(s,t){ht(t,!0);const[e,n]=qt();let i=O(()=>Kt(X,"$parameterStore",e));function a(d){var h;const m=(d.detail||((h=d.target)==null?void 0:h.value))==="rund";X.updateField("isRound",m)}const r=O(()=>z("bridgeBearing.bearingShape")),c=O(()=>g(i).isRound?"rund":"rechteckig");Qt(s,{get labelText(){return g(r)},get selected(){return g(c)},light:!0,$$events:{change:a},children:(d,l)=>{var m=Ui(),h=kt(m);const u=O(()=>z("bridgeBearing.rectangular"));Pt(h,{value:"rechteckig",get text(){return g(u)}});var p=et(h,2);const f=O(()=>z("bridgeBearing.round"));Pt(p,{value:"rund",get text(){return g(f)}}),Z(d,m)},$$slots:{default:!0}}),dt(),n()}function Eo(s,t){ht(t,!0);const[e,n]=qt();let i=O(()=>Kt(X,"$parameterStore",e)),a=O(ji),r=O(()=>ws.map(u=>u.diameter)),c=O(()=>g(i).isRound?g(r).findIndex(u=>u===g(i).d):g(a).findIndex(u=>u.length===g(i).a&&u.width===g(i).b)),d=O(()=>g(i).isRound?g(r).map((u,p)=>({value:p,label:`${u} mm`})):g(a).map((u,p)=>({value:p,label:`${u.length} mm x ${u.width} mm`})));function l(u){var f;const p=parseInt(((f=u.target)==null?void 0:f.value)||u.detail);if(g(i).isRound){const _=g(r)[p];_&&X.updateField("d",_)}else{const _=g(a)[p];_&&(X.updateField("a",_.length),X.updateField("b",_.width))}}const m=O(()=>g(i).isRound?z("bridgeBearing.dimensionsDiameter"):z("bridgeBearing.dimensionsLengthWidth")),h=O(()=>g(c).toString());Qt(s,{get labelText(){return g(m)},get selected(){return g(h)},light:!0,$$events:{change:l},children:(u,p)=>{var f=is(),_=kt(f);rs(_,17,()=>g(d),ls,(b,x)=>{const v=O(()=>g(x).value.toString());Pt(b,{get value(){return g(v)},get text(){return g(x).label}})}),Z(u,f)},$$slots:{default:!0}}),dt(),n()}function To(s,t){ht(t,!0);const[e,n]=qt();let i=O(()=>Kt(X,"$parameterStore",e)),a=O(()=>g(i).isRound?oi(g(i).d).map(l=>({value:`${l.n}-${l.t_1}`,label:`${z("bridgeBearing.layerCount")} ${l.n}, ${z("bridgeBearing.layerHeight")} ${l.t_1}mm`,n:l.n,t_1:l.t_1})):ii(g(i).a,g(i).b).map(l=>({value:`${l.n}-${l.t_1}`,label:`${z("bridgeBearing.layerCount")} ${l.n}, ${z("bridgeBearing.layerHeight")} ${l.t_1}mm`,n:l.n,t_1:l.t_1})));nn(()=>{const l=`${g(i).n}-${g(i).t_1}`;if(!g(a).some(h=>h.value===l)&&g(a).length>0){const h=g(a)[0];X.update(u=>({...u,n:h.n,t_1:h.t_1}))}});function r(l){var _;const m=((_=l.target)==null?void 0:_.value)||l.detail,[h,u]=m.split("-"),p=parseInt(h),f=parseFloat(u);X.update(b=>({...b,n:p,t_1:f}))}const c=O(()=>z("bridgeBearing.elastomerLayers")),d=O(()=>`${g(i).n}-${g(i).t_1}`);Qt(s,{get labelText(){return g(c)},get selected(){return g(d)},light:!0,$$events:{change:r},children:(l,m)=>{var h=is(),u=kt(h);rs(u,17,()=>g(a),ls,(p,f)=>{const _=O(()=>g(f).value.toString());Pt(p,{get value(){return g(_)},get text(){return g(f).label}})}),Z(l,h)},$$slots:{default:!0}}),dt(),n()}var Yi=ut('<span slot="tooltipText"> <br/> <br/> <br/> <br/> <br/> <br/> </span>'),Hi=ut("<!> <!>",1),Zi=ut('<div class="select-with-tooltip svelte-17kum7t"><div class="label-container svelte-17kum7t"><span class="label-text svelte-17kum7t"> </span> <!></div> <div style="margin-top: calc(-1 * var(--cds-spacing-03));"></div> <!></div>');function Mo(s,t){ht(t,!0);const[e,n]=qt();let i=O(()=>Kt(X,"$parameterStore",e));function a(p){var b;const _=(p.detail||((b=p.target)==null?void 0:b.value))==="Typ C"?"C":"B";X.updateField("l_typ",_)}var r=Zi(),c=q(r),d=q(c),l=q(d,!0);K(d);var m=et(d,2);cs(m,{get icon(){return hs},$$slots:{tooltipText:(p,f)=>{var _=Yi(),b=q(_,!0),x=et(b,4),v=et(x,4),E=et(v,4);K(_),mt((L,A,M,U)=>{J(b,L),J(x,` ${A??""}`),J(v,` ${M??""}`),J(E,` ${U??""}`)},[()=>z("bridgeBearing.typeBTooltip"),()=>z("bridgeBearing.typeCTooltip"),()=>z("bridgeBearing.typeCRequired"),()=>z("bridgeBearing.typeB_DBRestriction")]),Z(p,_)}}}),K(c);var h=et(c,4);const u=O(()=>g(i).l_typ==="C"?"Typ C":"Typ B");Qt(h,{labelText:"",get selected(){return g(u)},light:!0,$$events:{change:a},children:(p,f)=>{var _=Hi(),b=kt(_);const x=O(()=>z("bridgeBearing.typeB"));Pt(b,{value:"Typ B",get text(){return g(x)}});var v=et(b,2);const E=O(()=>z("bridgeBearing.typeC"));Pt(v,{value:"Typ C",get text(){return g(E)}}),Z(p,_)},$$slots:{default:!0}}),K(r),mt(p=>J(l,p),[()=>z("bridgeBearing.bearingType")]),Z(s,r),dt(),n()}function Vi(s,t=14211288){const e=new ys,o=new Tn().load(Ln("/texture/concrete1.jpg"));o.wrapS=He,o.wrapT=He,o.repeat.set(1,1),o.colorSpace=Mn;const i=new fs({map:o,color:t,metalness:.1,roughness:.8}),c=(s.isRound?s.diameter||400:s.breiteElastomer)/1e3*2+.5,d=c,l=2,m=c,h=.05,u=16,p=new ps;p.moveTo(0,0),p.lineTo(d,0),p.lineTo(d,l),p.lineTo(h*2,l),p.absarc(h,l,h,0,Math.PI,!0),p.lineTo(0,0);const f={depth:m,bevelEnabled:!1,curveSegments:u},_=new xe(p,f),b=new N(_,i);b.position.set(.3-d/2,-.4-l/2,-m/2),e.add(b);const x=.3,v=2.5,E=m,L=new us(x,v,E),A=new N(L,i),M=.3-d/2-x/2;return A.position.set(M,-.15,0),e.add(A),e}function Gi(){const s=new Pn;return s.background=new ms(10526880),s.fog=new zn(10526880,10,500),s}function Wi(s){const t=new Dn({antialias:!0});return t.setPixelRatio(window.devicePixelRatio),t.shadowMap.enabled=!0,t.shadowMap.type=Rn,t.localClippingEnabled=!0,s.appendChild(t.domElement),t}function qi(s,t=-10){const e=new N(new Cn(1e3,1e3),new Jt({color:13355979,depthWrite:!1}));e.rotation.x=-Math.PI/2,e.position.y=t,e.receiveShadow=!0,s.add(e)}function Ki(s,t,e,n,o,i){const a=new An(o,i);a.position.set(t,e,n),a.castShadow=!0;const r=50;return a.shadow.camera.left=-50,a.shadow.camera.right=r,a.shadow.camera.top=r,a.shadow.camera.bottom=-50,a.shadow.camera.near=1,a.shadow.camera.far=1e3,a.shadow.mapSize.width=4096,a.shadow.mapSize.height=4096,a.shadow.radius=2,a.shadow.bias=-5e-4,s.add(a),s.add(a.target),a}function Xi(s,t={x:0,y:500,z:0}){return s.add(new On(9272444,4802918,5)),Ki(s,t.x,t.y,t.z,16777215,2)}function Qi(s){s.setAnimationLoop(null)}function Ji(s){qi(s,-20)}function to(s){Xi(s,{x:0,y:500,z:0})}let ts=[];function es(s){ts.forEach(t=>{s.remove(t),t.geometry.dispose(),t.material instanceof rt&&t.material.dispose()}),ts=[]}var eo=ut('<span slot="tooltipText"><strong> </strong><br/> <br/> <br/> </span>'),so=ut('<div class="tooltip-container svelte-17njmpp"><!></div>');function no(s,t){ht(t,!1);let e=ct(t,"rightOffset",8,150);Xt();var n=so(),o=q(n);cs(o,{get icon(){return hs},direction:"left",$$slots:{tooltipText:(i,a)=>{var r=eo(),c=q(r),d=q(c,!0);K(c);var l=et(c,2),m=et(l,2),h=et(m,2);K(r),mt((u,p,f,_)=>{J(d,u),J(l,`  ${p??""}`),J(m,`  ${f??""}`),J(h,`  ${_??""}`)},[()=>z("bridgeBearing.scene.tooltip.title"),()=>z("bridgeBearing.scene.tooltip.rotate"),()=>z("bridgeBearing.scene.tooltip.zoom"),()=>z("bridgeBearing.scene.tooltip.pan")],os),Z(i,r)}}}),K(n),mt(()=>rn(n,`right: ${e()??""}px;`)),Z(s,n),dt()}function io(){const{subscribe:s,set:t,update:e}=Wt({renderer:null,camera:null,controls:null,scene:null,reloadTrigger:0});return{subscribe:s,setScene:n=>{e(o=>({...o,...n}))},reset:()=>{e(n=>({renderer:null,camera:null,controls:null,scene:null,reloadTrigger:n.reloadTrigger}))},reload:()=>{e(n=>({...n,reloadTrigger:n.reloadTrigger+1}))},captureScreenshot:async(n=!1)=>new Promise((o,i)=>{const a={renderer:null,camera:null,controls:null,scene:null,reloadTrigger:0};if(s(d=>{a.renderer=d.renderer,a.camera=d.camera,a.controls=d.controls,a.scene=d.scene,a.reloadTrigger=d.reloadTrigger})(),!a.renderer||!a.camera||!a.scene){i(new Error("Scene not initialized"));return}const c=()=>{if(!a.renderer||!a.camera||!a.scene){i(new Error("Scene not initialized"));return}a.renderer.render(a.scene,a.camera);const d=a.renderer.domElement.toDataURL("image/png");o(d)};n?(Ms(),setTimeout(c,1200)):c()})}}const ss=io();var oo=ut('<!> <div class="top-view-button-container svelte-51mmbc"><!></div>',1),ao=ut('<div id="container" class="svelte-51mmbc"><!></div>');function Po(s,t){ht(t,!1);let e=ct(t,"parameters",8,void 0),n=ct(t,"autoRotate",8,!1),o=ct(t,"showTooltip",8,!0);const i=[.3,.6,0],a=new y(3.033053660420776,2.3737696385820284,-.9540866817375618);let r=Lt(),c,d,l,m,h,u,p,f,_,b,x,v;function E(){return Te(Ct)}function L(w){f&&(c.remove(f),f.traverse(k=>{k instanceof N&&(k.geometry.dispose(),Array.isArray(k.material)?k.material.forEach(Y=>Y.dispose()):k.material.dispose())}),f=void 0),f=Vi({breiteElastomer:w.breiteElastomer,isRound:w.isRound,diameter:w.diameter}),c.add(f)}function A(w){if(!h||!u){console.warn("CreateElastomer or elastomerGroup not initialized");return}u.clear(),h.updateElastomer(w,i).forEach(Y=>{u.add(Y)}),es(c),L(w)}ln(async()=>{c=Gi(),l=Wi(g(r)),Ji(c),to(c),d=Ri(35),d.position.copy(a),m=Ci(d,l,i),ss.setScene({renderer:l,camera:d,controls:m,scene:c}),_=Oi(l,d,m),b=Ai(g(r),m,n()),x=Ii(g(r)),h=new Si(c,d),u=new ys,c.add(u);const w=e()||E();h.createElastomer(w,i).forEach($=>{u.add($)}),L(w);const F=1e3/30;let j=0;const H=$=>{v=requestAnimationFrame(H);const D=$-j;D<F||(j=$-D%F,ki($,d,m),Li(m),l.render(c,d))};if(H(0),Je(A),await on(),g(r)&&g(r)instanceof Element){let $=!1;p=new ResizeObserver(()=>{g(r)&&l&&d&&!$&&($=!0,requestAnimationFrame(()=>{if(g(r)&&l&&d){const D=g(r).clientWidth,B=g(r).clientHeight;l.setSize(D,B),d.aspect=D/B,d.updateProjectionMatrix()}$=!1}))}),p.observe(g(r))}}),cn(()=>{ss.reset(),v!==void 0&&cancelAnimationFrame(v),l&&Qi(l),_==null||_(),b==null||b(),x==null||x(),es(c),f&&(c.remove(f),f.traverse(w=>{w instanceof N&&(w.geometry.dispose(),Array.isArray(w.material)?w.material.forEach(k=>k.dispose()):w.material.dispose())}),f=void 0),l==null||l.dispose(),Je(()=>{}),p==null||p.disconnect()}),Xt();var M=ao(),U=q(M);{var tt=w=>{var k=oo(),Y=kt(k);no(Y,{});var F=et(Y,2),j=q(F);dn(j,{size:"small",kind:"secondary",$$events:{click:()=>Ms()},children:(H,$)=>{ye();var D=an();mt(B=>J(D,B),[()=>z("bridgeBearing.scene.topView")],os),Z(H,D)},$$slots:{default:!0}}),K(F),Z(w,k)};we(U,w=>{o()&&w(tt)})}return K(M),un(M,w=>At(r,w),()=>g(r)),Z(s,M),hn(t,"updateElastomer",A),dt({updateElastomer:A})}export{Ei as A,vo as B,xo as C,So as E,Po as T,Eo as a,To as b,Mo as c,Ge as i,wo as k,X as p,xs as r,ss as s};
